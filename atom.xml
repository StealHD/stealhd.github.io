<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>StealHD</title>
  
  <subtitle>Find yourself | All is well</subtitle>
  <link href="https://stealhd.github.io/atom.xml" rel="self"/>
  
  <link href="https://stealhd.github.io/"/>
  <updated>2024-08-12T09:29:26.268Z</updated>
  <id>https://stealhd.github.io/</id>
  
  <author>
    <name>Feng sj</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Zerotier</title>
    <link href="https://stealhd.github.io/2024/08/12/Zerotier/"/>
    <id>https://stealhd.github.io/2024/08/12/Zerotier/</id>
    <published>2024-08-12T08:23:28.000Z</published>
    <updated>2024-08-12T09:29:26.268Z</updated>
    
    <content type="html"><![CDATA[<h2 id="基于Zerotier根服务器的内网穿透部署"><a href="#基于Zerotier根服务器的内网穿透部署" class="headerlink" title="基于Zerotier根服务器的内网穿透部署"></a>基于Zerotier根服务器的内网穿透部署</h2><h3 id="创建（伪）根服务器"><a href="#创建（伪）根服务器" class="headerlink" title="创建（伪）根服务器"></a>创建（伪）根服务器</h3><p>项目地址：<a href="https://gitee.com/link?target=https://github.com/Jonnyan404/zerotier-planet">https://github.com/Jonnyan404/zerotier-planet</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart=on-failure:3 -d --name ztncui -e HTTP_PORT=4000 -e HTTP_ALL_INTERFACES=<span class="built_in">yes</span> -e ZTNCUI_PASSWD=mrdoc.fun -p 4000:4000 keynetworks/ztncui</span><br></pre></td></tr></table></figure><h3 id="创建-moon-服务器"><a href="#创建-moon-服务器" class="headerlink" title="创建 moon 服务器"></a>创建 moon 服务器</h3><p>项目地址：<a href="https://gitee.com/link?target=https://github.com/jonnyan404/docker-zerotier-moon">https://github.com/jonnyan404/docker-zerotier-moon</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建容器</span></span><br><span class="line">docker run --name zerotier-moon -d -p 9993:9993 -p 9993:9993/udp -v /etc/ztconf/:/var/lib/zerotier-one jonnyan404/zerotier-moon -4 [公网ipx.x.x.x]</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看moon ID</span></span><br><span class="line">docker logs zerotier-moon</span><br></pre></td></tr></table></figure><h3 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h3><h4 id="进入-IP-：4000-进入先改密码，默认密码-mrdoc-fun"><a href="#进入-IP-：4000-进入先改密码，默认密码-mrdoc-fun" class="headerlink" title="进入[IP]：4000 进入先改密码，默认密码  mrdoc.fun"></a>进入[IP]：4000 进入先改密码，默认密码  mrdoc.fun</h4><h4 id="创建网段"><a href="#创建网段" class="headerlink" title="创建网段"></a><img src="image-20240812163151417.png">创建网段</h4><p><img src="image-20240812163608254.png" alt="image-20240812163608254"></p><h4 id="下载Zerotire客户端"><a href="#下载Zerotire客户端" class="headerlink" title="下载Zerotire客户端"></a>下载Zerotire客户端</h4><p>加入自己id的网络，还需要授权</p><p><img src="image-20240812164541716.png" alt="image-20240812164541716"></p><p><img src="image-20240812164642136.png" alt="image-20240812164642136"></p><h4 id="配置moon服务器"><a href="#配置moon服务器" class="headerlink" title="配置moon服务器"></a>配置moon服务器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看moon ID</span></span><br><span class="line">docker logs zerotier-moon</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> C:\ProgramData\ZeroTier\One</span><br><span class="line">zerotier-cli orbit [moon_id] [moon_id]</span><br></pre></td></tr></table></figure><p>注：参考【<a href="https://gitee.com/spoto/natserver#windows-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8A%A0%E5%85%A5moon%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%91">https://gitee.com/spoto/natserver#windows-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8A%A0%E5%85%A5moon%E6%9C%8D%E5%8A%A1%E5%99%A8】</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;基于Zerotier根服务器的内网穿透部署&quot;&gt;&lt;a href=&quot;#基于Zerotier根服务器的内网穿透部署&quot; class=&quot;headerlink&quot; title=&quot;基于Zerotier根服务器的内网穿透部署&quot;&gt;&lt;/a&gt;基于Zerotier根服务器的内网穿透部署&lt;/</summary>
      
    
    
    
    
    <category term="Zerotier" scheme="https://stealhd.github.io/tags/Zerotier/"/>
    
  </entry>
  
  <entry>
    <title>Oracle data transform use dblink</title>
    <link href="https://stealhd.github.io/2024/08/01/Oracle-Dblink/"/>
    <id>https://stealhd.github.io/2024/08/01/Oracle-Dblink/</id>
    <published>2024-08-01T03:13:26.000Z</published>
    <updated>2024-08-01T11:10:47.858Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Created on 7/23/2024</span></span><br><span class="line"><span class="comment">-- 提前创建system.log日志表</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  <span class="comment">-- Local variables here</span></span><br><span class="line">  i              <span class="type">integer</span>;</span><br><span class="line">  new_owner      varchar2(<span class="number">4000</span>);</span><br><span class="line">  new_table_name varchar2(<span class="number">4000</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">-- Test statements here</span></span><br><span class="line">  <span class="keyword">for</span> a <span class="keyword">in</span> (<span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line">              <span class="keyword">from</span> dba_users<span class="variable">@dbsoar</span></span><br><span class="line">             <span class="keyword">where</span> username <span class="keyword">in</span> (<span class="string">&#x27;###username&#x27;</span>)</span><br><span class="line">             <span class="keyword">order</span> <span class="keyword">by</span> username) loop</span><br><span class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> (<span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line">                <span class="keyword">from</span> dba_tables<span class="variable">@dbsoar</span> </span><br><span class="line">               <span class="keyword">where</span> owner <span class="operator">=</span> a.username</span><br><span class="line">                 <span class="keyword">and</span> table_name <span class="operator">!=</span> <span class="string">&#x27;###table name&#x27;</span> </span><br><span class="line">               <span class="keyword">order</span> <span class="keyword">by</span> owner, table_name) loop</span><br><span class="line">      <span class="keyword">for</span> c <span class="keyword">in</span> (<span class="keyword">select</span> wm_concat(<span class="string">&#x27;&quot;&#x27;</span> <span class="operator">||</span> column_name <span class="operator">||</span> <span class="string">&#x27;&quot;&#x27;</span>) <span class="keyword">as</span> column_name</span><br><span class="line">                  <span class="keyword">from</span> dba_tab_cols<span class="variable">@dbsoar</span></span><br><span class="line">                 <span class="keyword">where</span> owner <span class="operator">=</span> b.owner</span><br><span class="line">                   <span class="keyword">and</span> table_name <span class="operator">=</span> b.table_name</span><br><span class="line">                   <span class="keyword">and</span> data_type <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">&#x27;BLOB&#x27;</span>, <span class="string">&#x27;CLOB&#x27;</span>, <span class="string">&#x27;LONG&#x27;</span>, <span class="string">&#x27;LONG RAW&#x27;</span>)  </span><br><span class="line">                   <span class="keyword">and</span> column_id <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">                 <span class="keyword">order</span> <span class="keyword">by</span> column_id) loop</span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">          new_owner      :<span class="operator">=</span> <span class="string">&#x27;&quot;&#x27;</span> <span class="operator">||</span> b.owner <span class="operator">||</span> <span class="string">&#x27;&quot;&#x27;</span>;</span><br><span class="line">          new_table_name :<span class="operator">=</span> <span class="string">&#x27;&quot;&#x27;</span> <span class="operator">||</span> b.table_name <span class="operator">||</span> <span class="string">&#x27;&quot;&#x27;</span>;</span><br><span class="line">          <span class="comment">-- insert sql: create table</span></span><br><span class="line">          <span class="keyword">insert</span> <span class="keyword">into</span> system.log</span><br><span class="line">          <span class="keyword">values</span></span><br><span class="line">            ((<span class="keyword">select</span> nvl(<span class="built_in">max</span>(id) <span class="operator">+</span> <span class="number">1</span>, <span class="number">1</span>) <span class="keyword">from</span> system.log),</span><br><span class="line">             sysdate,</span><br><span class="line">             <span class="string">&#x27;info: sql: create table &#x27;</span> <span class="operator">||</span> new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span></span><br><span class="line">             new_table_name <span class="operator">||</span> <span class="string">&#x27; as select &#x27;</span> <span class="operator">||</span> c.column_name <span class="operator">||</span> <span class="string">&#x27; from &#x27;</span> <span class="operator">||</span></span><br><span class="line">             new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span> new_table_name <span class="operator">||</span> <span class="string">&#x27;@dbsoar&#x27;</span>);</span><br><span class="line">          <span class="keyword">commit</span>;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">          <span class="comment">-- select abs count table </span></span><br><span class="line">          <span class="keyword">insert</span> <span class="keyword">into</span> system.log</span><br><span class="line">          <span class="keyword">values</span></span><br><span class="line">            ((<span class="keyword">select</span> nvl(<span class="built_in">max</span>(id) <span class="operator">+</span> <span class="number">1</span>, <span class="number">1</span>) <span class="keyword">from</span> system.log),</span><br><span class="line">             sysdate,</span><br><span class="line">             <span class="string">&#x27;info: select abs count table: &#x27;</span> <span class="operator">||</span> new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span></span><br><span class="line">             new_table_name);</span><br><span class="line">          <span class="keyword">commit</span>;</span><br><span class="line">          <span class="comment">-- /*+ all_rows parallel (4) */</span></span><br><span class="line">          <span class="keyword">execute</span> immediate <span class="string">&#x27;select /*+ all_rows parallel (4) */ abs((select count(*) from &#x27;</span> <span class="operator">||</span></span><br><span class="line">                            new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span> new_table_name <span class="operator">||</span></span><br><span class="line">                            <span class="string">&#x27;) - (select count(*) from &#x27;</span> <span class="operator">||</span> new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span></span><br><span class="line">                            new_table_name <span class="operator">||</span> <span class="string">&#x27;@dbsoar)) from dual&#x27;</span></span><br><span class="line">            <span class="keyword">into</span> i;</span><br><span class="line">          <span class="keyword">insert</span> <span class="keyword">into</span> system.log</span><br><span class="line">          <span class="keyword">values</span></span><br><span class="line">            ((<span class="keyword">select</span> nvl(<span class="built_in">max</span>(id) <span class="operator">+</span> <span class="number">1</span>, <span class="number">1</span>) <span class="keyword">from</span> system.log),</span><br><span class="line">             sysdate,</span><br><span class="line">             <span class="string">&#x27;info: select abs count table: over: &#x27;</span> <span class="operator">||</span> new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span></span><br><span class="line">             new_table_name);</span><br><span class="line">          <span class="keyword">commit</span>;</span><br><span class="line">        </span><br><span class="line">          <span class="comment">-- drop if gap &gt; 10000 and create table </span></span><br><span class="line">          <span class="keyword">insert</span> <span class="keyword">into</span> system.log</span><br><span class="line">          <span class="keyword">values</span></span><br><span class="line">            ((<span class="keyword">select</span> nvl(<span class="built_in">max</span>(id) <span class="operator">+</span> <span class="number">1</span>, <span class="number">1</span>) <span class="keyword">from</span> system.log),</span><br><span class="line">             sysdate,</span><br><span class="line">             <span class="string">&#x27;warn: &#x27;</span> <span class="operator">||</span> i <span class="operator">||</span> <span class="string">&#x27;: &#x27;</span> <span class="operator">||</span> new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span> new_table_name);</span><br><span class="line">          <span class="keyword">commit</span>;</span><br><span class="line">          if i <span class="operator">&gt;=</span> <span class="number">10000</span> <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">execute</span> immediate <span class="string">&#x27;drop /*+ all_rows parallel (4) */ table &#x27;</span> <span class="operator">||</span></span><br><span class="line">                              new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span> new_table_name;</span><br><span class="line">            <span class="keyword">execute</span> immediate <span class="string">&#x27;create /*+ all_rows parallel (4) */ table &#x27;</span> <span class="operator">||</span></span><br><span class="line">                              new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span> new_table_name <span class="operator">||</span></span><br><span class="line">                              <span class="string">&#x27; as select &#x27;</span> <span class="operator">||</span> c.column_name <span class="operator">||</span> <span class="string">&#x27; from &#x27;</span> <span class="operator">||</span></span><br><span class="line">                              new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span> new_table_name <span class="operator">||</span></span><br><span class="line">                              <span class="string">&#x27;@dbsoar&#x27;</span>;</span><br><span class="line">            <span class="keyword">insert</span> <span class="keyword">into</span> system.log</span><br><span class="line">            <span class="keyword">values</span></span><br><span class="line">              ((<span class="keyword">select</span> nvl(<span class="built_in">max</span>(id) <span class="operator">+</span> <span class="number">1</span>, <span class="number">1</span>) <span class="keyword">from</span> system.log),</span><br><span class="line">               sysdate,</span><br><span class="line">               <span class="string">&#x27;warn: &#x27;</span> <span class="operator">||</span> i <span class="operator">||</span> <span class="string">&#x27;: over: &#x27;</span> <span class="operator">||</span> new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span></span><br><span class="line">               new_table_name);</span><br><span class="line">            <span class="keyword">commit</span>;</span><br><span class="line">          <span class="keyword">end</span> if;</span><br><span class="line">        exception</span><br><span class="line">          <span class="keyword">when</span> others <span class="keyword">then</span></span><br><span class="line">            <span class="comment">-- create table</span></span><br><span class="line">            <span class="keyword">insert</span> <span class="keyword">into</span> system.log</span><br><span class="line">            <span class="keyword">values</span></span><br><span class="line">              ((<span class="keyword">select</span> nvl(<span class="built_in">max</span>(id) <span class="operator">+</span> <span class="number">1</span>, <span class="number">1</span>) <span class="keyword">from</span> system.log),</span><br><span class="line">               sysdate,</span><br><span class="line">               <span class="string">&#x27;info: create table: &#x27;</span> <span class="operator">||</span> new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span> new_table_name);</span><br><span class="line">            <span class="keyword">commit</span>;</span><br><span class="line">            <span class="keyword">execute</span> immediate <span class="string">&#x27;create /*+ all_rows parallel (4) */ table &#x27;</span> <span class="operator">||</span></span><br><span class="line">                              new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span> new_table_name <span class="operator">||</span></span><br><span class="line">                              <span class="string">&#x27; as select &#x27;</span> <span class="operator">||</span> c.column_name <span class="operator">||</span> <span class="string">&#x27; from &#x27;</span> <span class="operator">||</span></span><br><span class="line">                              new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span> new_table_name <span class="operator">||</span></span><br><span class="line">                              <span class="string">&#x27;@dbsoar&#x27;</span>;</span><br><span class="line">            <span class="keyword">insert</span> <span class="keyword">into</span> system.log</span><br><span class="line">            <span class="keyword">values</span></span><br><span class="line">              ((<span class="keyword">select</span> nvl(<span class="built_in">max</span>(id) <span class="operator">+</span> <span class="number">1</span>, <span class="number">1</span>) <span class="keyword">from</span> system.log),</span><br><span class="line">               sysdate,</span><br><span class="line">               <span class="string">&#x27;info: create table: over: &#x27;</span> <span class="operator">||</span> new_owner <span class="operator">||</span> <span class="string">&#x27;.&#x27;</span> <span class="operator">||</span></span><br><span class="line">               new_table_name);</span><br><span class="line">            <span class="keyword">commit</span>;</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line">      <span class="keyword">end</span> loop;</span><br><span class="line">    <span class="keyword">end</span> loop;</span><br><span class="line">  <span class="keyword">end</span> loop;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Oracle 迁移数据不包括大字段数据。</summary>
    
    
    
    
    <category term="Oracle" scheme="https://stealhd.github.io/tags/Oracle/"/>
    
  </entry>
  
  <entry>
    <title>Monitoring system installation</title>
    <link href="https://stealhd.github.io/2024/05/23/Monitoring-system-installation/"/>
    <id>https://stealhd.github.io/2024/05/23/Monitoring-system-installation/</id>
    <published>2024-05-23T07:07:36.000Z</published>
    <updated>2024-05-29T02:55:24.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Monitoring-system-installation"><a href="#Monitoring-system-installation" class="headerlink" title="Monitoring system installation"></a>Monitoring system installation</h1><h2 id="前置条件"><a href="#前置条件" class="headerlink" title="前置条件"></a>前置条件</h2><ol><li>oracle 服务器 + 监控服务器</li></ol><p>说明：服务器监控由node_exporter实现，oracle自定义配置监控项（表空间+监听+ogg+dg+asm空间+process+session）</p><p>根据测试环境目前不考虑实现asm、dg、ogg的配置。</p><h3 id="监控组件安装配置"><a href="#监控组件安装配置" class="headerlink" title="监控组件安装配置"></a>监控组件安装配置</h3><p>下载解压</p><p>官方网站：<a href="https://prometheus.io/download/">https://prometheus.io/download/</a></p><p>node_exporter-1.8.1.linux-amd64.tar.gz<br>prometheus-2.45.5.linux-amd64.tar.gz<br>alertmanager-0.27.0.linux-amd64.tar.gz</p><p>sudo yum install -y <a href="https://dl.grafana.com/enterprise/release/grafana-enterprise-11.0.0-1.x86_64.rpm">https://dl.grafana.com/enterprise/release/grafana-enterprise-11.0.0-1.x86_64.rpm</a><br>sudo systemctl start grafana-server<br>sudo systemctl status grafana-server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载解压之后</span></span><br><span class="line"><span class="comment"># 启动支持热重启curl -XPOST http://192.168.192.203:9090/-/reload</span></span><br><span class="line"><span class="built_in">nohup</span> ./prometheus --web.enable-lifecycle &amp;</span><br><span class="line"><span class="comment"># 同理启动 node_exporter 添加自定义配置目录 --collector.textfile.directory=&quot;/root/node_exporter/prom/</span></span><br><span class="line"><span class="built_in">nohup</span> ./node_exporter --collector.textfile.directory=<span class="string">&quot;/root/node_exporter/prom/&quot;</span> &amp;</span><br><span class="line"><span class="comment"># 启动 alertmanager</span></span><br><span class="line"><span class="built_in">nohup</span> ./alertmanager &amp;</span><br><span class="line"><span class="comment"># 安装grafana</span></span><br><span class="line">yum install -y https://dl.grafana.com/enterprise/release/grafana-enterprise-11.0.0-1.x86_64.rpm</span><br><span class="line">systemctl start grafana-server</span><br><span class="line">systemctl status grafana-server</span><br></pre></td></tr></table></figure><p><img src="image-20240527154937036.png" alt="image-20240527154937036"></p><p><img src="image-20240527155118271.png" alt="image-20240527155118271"></p><p><img src="image-20240527154845242.png" alt="image-20240527154845242"></p><p><img src="image-20240527161017369.png" alt="image-20240527161017369"></p><h3 id="配置oracle-端-node-exporter"><a href="#配置oracle-端-node-exporter" class="headerlink" title="配置oracle 端 node_exporter"></a>配置oracle 端 node_exporter</h3><h4 id="配置抓取信息sh脚本"><a href="#配置抓取信息sh脚本" class="headerlink" title="配置抓取信息sh脚本"></a>配置抓取信息sh脚本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 同server端线先解压安装</span></span><br><span class="line"><span class="comment"># 需要抓取的数据库信息  cat oracle.sh  生成的prom文件 /root/node_exporter/prom</span></span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">. /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /root/node_exporter/prom</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LANG=en_US.UTF-8</span><br><span class="line"></span><br><span class="line">M=`<span class="built_in">date</span> +%M`</span><br><span class="line">H=`<span class="built_in">date</span> +%H`</span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span> &gt; ../prom/oracle.prom  2&gt;/dev/null</span><br><span class="line"></span><br><span class="line"><span class="comment"># tablespace</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE tablespace_used_space gauge&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE tablespace_size gauge&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE tablespace_free_space gauge&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE tablespace_used_percent gauge&quot;</span></span><br><span class="line"></span><br><span class="line">su - oracle -c <span class="string">&quot;sqlplus -S / as sysdba&quot;</span> &lt;&lt; <span class="string">EOF | grep -E -i &#x27;PERMANENT|TEMPORARY|UNDO&#x27; | \</span></span><br><span class="line"><span class="string">awk &#x27;&#123; print &quot;tablespace_used_space&#123;tablespace=\&quot;&quot; $1 &quot;\&quot;,contents=\&quot;&quot; $2 &quot;\&quot;&#125; &quot; $3 &quot;\n&quot; \</span></span><br><span class="line"><span class="string">             &quot;tablespace_size&#123;tablespace=\&quot;&quot; $1 &quot;\&quot;,contents=\&quot;&quot; $2 &quot;\&quot;&#125; &quot; $4 &quot;\n&quot; \</span></span><br><span class="line"><span class="string">             &quot;tablespace_free_space&#123;tablespace=\&quot;&quot; $1 &quot;\&quot;,contents=\&quot;&quot; $2 &quot;\&quot;&#125; &quot; $5 &quot;\n&quot; \</span></span><br><span class="line"><span class="string">             &quot;tablespace_used_percent&#123;tablespace=\&quot;&quot; $1 &quot;\&quot;,contents=\&quot;&quot; $2 &quot;\&quot;&#125; &quot; $6 &#125;&#x27;</span></span><br><span class="line"><span class="string">set line 200</span></span><br><span class="line"><span class="string">set pagesize 600</span></span><br><span class="line"><span class="string">select dt.tablespace_name,</span></span><br><span class="line"><span class="string">       dt.contents,</span></span><br><span class="line"><span class="string">       dt.block_size * dtum.used_space as used_space,</span></span><br><span class="line"><span class="string">       dt.block_size * dtum.tablespace_size as tablespace_size,</span></span><br><span class="line"><span class="string">       dt.block_size * (dtum.tablespace_size - dtum.used_space) as free_space,</span></span><br><span class="line"><span class="string">       dtum.used_percent</span></span><br><span class="line"><span class="string">  from dba_tablespace_usage_metrics dtum, dba_tablespaces dt</span></span><br><span class="line"><span class="string"> where dtum.tablespace_name = dt.tablespace_name;</span></span><br><span class="line"><span class="string">exit</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="comment">## tablespace</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># job</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE job_broken gauge&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE job_running_time gauge&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE job_failures gauge&quot;</span></span><br><span class="line"></span><br><span class="line">su - oracle -c <span class="string">&quot;sqlplus -S / as sysdba&quot;</span> &lt;&lt; <span class="string">EOF | grep -E &#x27;[0-9]&#x27; | grep -v &#x27;rows selected.&#x27; | \</span></span><br><span class="line"><span class="string">awk &#x27;&#123; if ( $3 == &quot;N&quot; ) &#123; $3 = 1 &#125; if ( $3 == &quot;Y&quot; ) &#123; $3 = 0 &#125; \</span></span><br><span class="line"><span class="string">print &quot;job_broken&#123;job=\&quot;&quot; $1 &quot;\&quot;,schema_user=\&quot;&quot; $2 &quot;\&quot;&#125; &quot; $3 &quot;\n&quot; \</span></span><br><span class="line"><span class="string">      &quot;job_running_time&#123;job=\&quot;&quot; $1 &quot;\&quot;,schema_user=\&quot;&quot; $2 &quot;\&quot;&#125; &quot; $4 &quot;\n&quot; \</span></span><br><span class="line"><span class="string">      &quot;job_failures&#123;job=\&quot;&quot; $1 &quot;\&quot;,schema_user=\&quot;&quot; $2 &quot;\&quot;&#125; &quot; $5 &#125;&#x27;</span></span><br><span class="line"><span class="string">set line 200</span></span><br><span class="line"><span class="string">set pagesize 600</span></span><br><span class="line"><span class="string">select a.job,</span></span><br><span class="line"><span class="string">       a.schema_user,</span></span><br><span class="line"><span class="string">       a.broken,</span></span><br><span class="line"><span class="string">       nvl(sysdate - a.this_date, 0) * 24 * 60 * 60 running_time,</span></span><br><span class="line"><span class="string">       nvl(a.failures, 0) failures</span></span><br><span class="line"><span class="string">  from dba_jobs a;</span></span><br><span class="line"><span class="string">exit</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="comment">## job</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dg</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE dg_subtract_max_sequence gauge&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> mrp <span class="keyword">in</span> `ps -ef | grep mrp | grep -v grep | awk <span class="string">&#x27;&#123; print $8 &#125;&#x27;</span> | awk -F <span class="string">&#x27;_&#x27;</span> <span class="string">&#x27;&#123; print $3 &#125;&#x27;</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">su - oracle -c <span class="string">&quot;export ORACLE_SID=<span class="variable">$mrp</span></span></span><br><span class="line"><span class="string">sqlplus -S / as sysdba&quot;</span> &lt;&lt; <span class="string">EOF | grep -E -i -v &#x27;INSTANCE_NAME|-&#x27; | \</span></span><br><span class="line"><span class="string">awk &#x27;&#123; if ( ! NF ) &#123; next &#125; print &quot;dg_subtract_max_sequence&#123;instance_name=\&quot;&quot; $1 &quot;\&quot;,thread=\&quot;&quot; $2 &quot;\&quot;&#125; &quot; $5 &#125;&#x27;</span></span><br><span class="line"><span class="string">set line 200</span></span><br><span class="line"><span class="string">select instance_name,</span></span><br><span class="line"><span class="string">       archived.thread#,</span></span><br><span class="line"><span class="string">       archived.max_sequence# archived_max_sequence#,</span></span><br><span class="line"><span class="string">       applied.max_sequence# applied_max_sequence#,</span></span><br><span class="line"><span class="string">       archived.max_sequence# - applied.max_sequence# subtract_max_sequence#</span></span><br><span class="line"><span class="string">  from v\$instance,</span></span><br><span class="line"><span class="string">       (select thread#, max(sequence#) max_sequence#</span></span><br><span class="line"><span class="string">          from v\$archived_log</span></span><br><span class="line"><span class="string">         where archived = &#x27;YES&#x27;</span></span><br><span class="line"><span class="string">           and resetlogs_change# =</span></span><br><span class="line"><span class="string">               (select resetlogs_change# from v\$database)</span></span><br><span class="line"><span class="string">         group by thread#) archived,</span></span><br><span class="line"><span class="string">       (select thread#, max(sequence#) max_sequence#</span></span><br><span class="line"><span class="string">          from v\$archived_log</span></span><br><span class="line"><span class="string">         where applied = &#x27;YES&#x27;</span></span><br><span class="line"><span class="string">           and resetlogs_change# =</span></span><br><span class="line"><span class="string">               (select resetlogs_change# from v\$database)</span></span><br><span class="line"><span class="string">         group by thread#) applied</span></span><br><span class="line"><span class="string"> where archived.thread# = applied.thread#;</span></span><br><span class="line"><span class="string">exit</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">## dg</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># process</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE oracle_max_process gauge&quot;</span></span><br><span class="line"></span><br><span class="line">su - oracle -c <span class="string">&quot;sqlplus -S / as sysdba&quot;</span> &lt;&lt; <span class="string">EOF | grep -i -w &#x27;processes&#x27; | awk &#x27;&#123; print &quot;oracle_max_process &quot; $3 &#125;&#x27;</span></span><br><span class="line"><span class="string">show parameter processes</span></span><br><span class="line"><span class="string">exit</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE oracle_cur_process gauge&quot;</span></span><br><span class="line"></span><br><span class="line">su - oracle -c <span class="string">&quot;sqlplus -S / as sysdba&quot;</span> &lt;&lt; <span class="string">EOF | sed -n &#x27;4p&#x27; | column -t | awk &#x27;&#123; print &quot;oracle_cur_process &quot; $1 &#125;&#x27;</span></span><br><span class="line"><span class="string">select count(*) from v\$process;</span></span><br><span class="line"><span class="string">exit</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE oracle_nol_process gauge&quot;</span></span><br><span class="line"></span><br><span class="line">ps -ef | grep oracle | grep LOCAL=NO | <span class="built_in">wc</span> -l | awk <span class="string">&#x27;&#123; print &quot;oracle_nol_process &quot; $1 &#125;&#x27;</span></span><br><span class="line"><span class="comment">## process</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># session</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE oracle_max_session gauge&quot;</span></span><br><span class="line"></span><br><span class="line">su - oracle -c <span class="string">&quot;sqlplus -S / as sysdba&quot;</span> &lt;&lt; <span class="string">EOF | grep -i -w &#x27;sessions&#x27; | awk &#x27;&#123; print &quot;oracle_max_session &quot; $3 &#125;&#x27;</span></span><br><span class="line"><span class="string">show parameter sessions</span></span><br><span class="line"><span class="string">exit</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE oracle_cur_session gauge&quot;</span></span><br><span class="line"></span><br><span class="line">su - oracle -c <span class="string">&quot;sqlplus -S / as sysdba&quot;</span> &lt;&lt; <span class="string">EOF | sed -n &#x27;4p&#x27; | awk &#x27;&#123; print &quot;oracle_cur_session &quot; $1 &#125;&#x27;</span></span><br><span class="line"><span class="string">select count(*) from v\$session;</span></span><br><span class="line"><span class="string">exit</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# TYPE oracle_act_session gauge&quot;</span></span><br><span class="line"></span><br><span class="line">su - oracle -c <span class="string">&quot;sqlplus -S / as sysdba&quot;</span> &lt;&lt; <span class="string">EOF | sed -n &#x27;4p&#x27; | awk &#x27;&#123; print &quot;oracle_act_session &quot; $1 &#125;&#x27;</span></span><br><span class="line"><span class="string">select count(*) from v\$session where status = &#x27;ACTIVE&#x27;;</span></span><br><span class="line"><span class="string">exit</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="comment">## session</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"># 文件内容</span><br><span class="line">[root@oracle prom]# cat oracle.prom</span><br><span class="line"># TYPE tablespace_used_space gauge</span><br><span class="line"># TYPE tablespace_size gauge</span><br><span class="line"># TYPE tablespace_free_space gauge</span><br><span class="line"># TYPE tablespace_used_percent gauge</span><br><span class="line">tablespace_used_space&#123;tablespace=&quot;OGG_DATA&quot;,contents=&quot;PERMANENT&quot;&#125; 9568256</span><br><span class="line">tablespace_size&#123;tablespace=&quot;OGG_DATA&quot;,contents=&quot;PERMANENT&quot;&#125; 1.9565E+10</span><br><span class="line">tablespace_free_space&#123;tablespace=&quot;OGG_DATA&quot;,contents=&quot;PERMANENT&quot;&#125; 1.9555E+10</span><br><span class="line">tablespace_used_percent&#123;tablespace=&quot;OGG_DATA&quot;,contents=&quot;PERMANENT&quot;&#125; .048904956</span><br><span class="line">tablespace_used_space&#123;tablespace=&quot;SYSAUX&quot;,contents=&quot;PERMANENT&quot;&#125; 906625024</span><br><span class="line">tablespace_size&#123;tablespace=&quot;SYSAUX&quot;,contents=&quot;PERMANENT&quot;&#125; 2.0309E+10</span><br><span class="line">tablespace_free_space&#123;tablespace=&quot;SYSAUX&quot;,contents=&quot;PERMANENT&quot;&#125; 1.9403E+10</span><br><span class="line">tablespace_used_percent&#123;tablespace=&quot;SYSAUX&quot;,contents=&quot;PERMANENT&quot;&#125; 4.46404586</span><br><span class="line">tablespace_used_space&#123;tablespace=&quot;SYSTEM&quot;,contents=&quot;PERMANENT&quot;&#125; 788004864</span><br><span class="line">tablespace_size&#123;tablespace=&quot;SYSTEM&quot;,contents=&quot;PERMANENT&quot;&#125; 2.0163E+10</span><br><span class="line">tablespace_free_space&#123;tablespace=&quot;SYSTEM&quot;,contents=&quot;PERMANENT&quot;&#125; 1.9375E+10</span><br><span class="line">tablespace_used_percent&#123;tablespace=&quot;SYSTEM&quot;,contents=&quot;PERMANENT&quot;&#125; 3.90823259</span><br><span class="line">tablespace_used_space&#123;tablespace=&quot;TEMP&quot;,contents=&quot;TEMPORARY&quot;&#125; 1048576</span><br><span class="line">tablespace_size&#123;tablespace=&quot;TEMP&quot;,contents=&quot;TEMPORARY&quot;&#125; 1.9387E+10</span><br><span class="line">tablespace_free_space&#123;tablespace=&quot;TEMP&quot;,contents=&quot;TEMPORARY&quot;&#125; 1.9386E+10</span><br><span class="line">tablespace_used_percent&#123;tablespace=&quot;TEMP&quot;,contents=&quot;TEMPORARY&quot;&#125; .005408644</span><br><span class="line">tablespace_used_space&#123;tablespace=&quot;UNDOTBS1&quot;,contents=&quot;UNDO&quot;&#125; 1310720</span><br><span class="line">tablespace_size&#123;tablespace=&quot;UNDOTBS1&quot;,contents=&quot;UNDO&quot;&#125; 1.9456E+10</span><br><span class="line">tablespace_free_space&#123;tablespace=&quot;UNDOTBS1&quot;,contents=&quot;UNDO&quot;&#125; 1.9455E+10</span><br><span class="line">tablespace_used_percent&#123;tablespace=&quot;UNDOTBS1&quot;,contents=&quot;UNDO&quot;&#125; .006736757</span><br><span class="line">tablespace_used_space&#123;tablespace=&quot;USERS&quot;,contents=&quot;PERMANENT&quot;&#125; 1572864</span><br><span class="line">tablespace_size&#123;tablespace=&quot;USERS&quot;,contents=&quot;PERMANENT&quot;&#125; 1.9361E+10</span><br><span class="line">tablespace_free_space&#123;tablespace=&quot;USERS&quot;,contents=&quot;PERMANENT&quot;&#125; 1.9359E+10</span><br><span class="line">tablespace_used_percent&#123;tablespace=&quot;USERS&quot;,contents=&quot;PERMANENT&quot;&#125; .008124075</span><br><span class="line"># TYPE job_broken gauge</span><br><span class="line"># TYPE job_running_time gauge</span><br><span class="line"># TYPE job_failures gauge</span><br><span class="line">job_broken&#123;job=&quot;4001&quot;,schema_user=&quot;APEX_030200&quot;&#125; 1</span><br><span class="line">job_running_time&#123;job=&quot;4001&quot;,schema_user=&quot;APEX_030200&quot;&#125; 0</span><br><span class="line">job_failures&#123;job=&quot;4001&quot;,schema_user=&quot;APEX_030200&quot;&#125; 0</span><br><span class="line">job_broken&#123;job=&quot;4002&quot;,schema_user=&quot;APEX_030200&quot;&#125; 1</span><br><span class="line">job_running_time&#123;job=&quot;4002&quot;,schema_user=&quot;APEX_030200&quot;&#125; 0</span><br><span class="line">job_failures&#123;job=&quot;4002&quot;,schema_user=&quot;APEX_030200&quot;&#125; 0</span><br><span class="line">job_broken&#123;job=&quot;3&quot;,schema_user=&quot;SYSMAN&quot;&#125; 1</span><br><span class="line">job_running_time&#123;job=&quot;3&quot;,schema_user=&quot;SYSMAN&quot;&#125; 0</span><br><span class="line">job_failures&#123;job=&quot;3&quot;,schema_user=&quot;SYSMAN&quot;&#125; 0</span><br><span class="line"># TYPE dg_subtract_max_sequence gauge</span><br><span class="line"># TYPE oracle_max_process gauge</span><br><span class="line">oracle_max_process 150</span><br><span class="line"># TYPE oracle_cur_process gauge</span><br><span class="line">oracle_cur_process 33</span><br><span class="line"># TYPE oracle_nol_process gauge</span><br><span class="line">oracle_nol_process 0</span><br><span class="line"># TYPE oracle_max_session gauge</span><br><span class="line">oracle_max_session 249</span><br><span class="line"># TYPE oracle_cur_session gauge</span><br><span class="line">oracle_cur_session 30</span><br><span class="line"># TYPE oracle_act_session gauge</span><br><span class="line">oracle_act_session 29</span><br></pre></td></tr></table></figure><h4 id="编辑server端Prometheus配置文件"><a href="#编辑server端Prometheus配置文件" class="headerlink" title="编辑server端Prometheus配置文件"></a>编辑server端Prometheus配置文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">global:</span><br><span class="line">  scrape_interval:</span><br><span class="line">  external_labels:</span><br><span class="line">    monitor: <span class="string">&#x27;codelab-monitor&#x27;</span></span><br><span class="line">alerting:</span><br><span class="line">  alertmanagers:</span><br><span class="line">    - static_configs:</span><br><span class="line">        - targets:</span><br><span class="line">          - 192.168.192.203:9093</span><br><span class="line">rule_files:</span><br><span class="line">  - <span class="string">&quot;first_rules.yml&quot;</span></span><br><span class="line">scrape_configs:</span><br><span class="line">  - job_name: <span class="string">&#x27;prometheus&#x27;</span></span><br><span class="line">    scrape_interval: 5s</span><br><span class="line">    static_configs:</span><br><span class="line">      - targets: [<span class="string">&#x27;localhost:9090&#x27;</span>]</span><br><span class="line">  - job_name: <span class="string">&#x27;node_exporte&#x27;</span></span><br><span class="line">    scrape_interval: 5s</span><br><span class="line">    static_configs:</span><br><span class="line">      - targets: [<span class="string">&#x27;localhost:9100&#x27;</span>,<span class="string">&#x27;192.168.192.119:9100&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 借鉴配置形式 配置完热重启Prometheus</span></span><br><span class="line"><span class="built_in">groups</span>:</span><br><span class="line">- name: node_exporter</span><br><span class="line">  rules:</span><br><span class="line">  - alert: up</span><br><span class="line">    <span class="built_in">expr</span>: up&#123;job=<span class="string">&quot;node_exporter&quot;</span>&#125; == 0</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: filesystem</span><br><span class="line">    <span class="built_in">expr</span>: 100 - 100 * node_filesystem_avail_bytes&#123;fstype!~<span class="string">&quot;fuse.gvfs-fuse-daemon|fuse.gvfsd-fuse|rootfs|tmpfs&quot;</span>,mountpoint!~<span class="string">&quot;/boot|/boot/efi&quot;</span>&#125; / node_filesystem_size_bytes&#123;fstype!~<span class="string">&quot;fuse.gvfs-fuse-daemon|fuse.gvfsd-fuse|rootfs|tmpfs&quot;</span>,mountpoint!~<span class="string">&quot;/boot|/boot/efi&quot;</span>&#125; &gt;= 95</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line">- name: oracle</span><br><span class="line">  rules:</span><br><span class="line">  - alert: up</span><br><span class="line">    <span class="built_in">expr</span>: up&#123;instance=~<span class="string">&quot;172.16.10.101:9100|172.16.100.35:9100|172.16.100.36:9100|172.16.100.54:9100|172.16.100.55:9100|172.16.100.72:9100|172.16.100.73:9100|172.16.100.220:9100|192.168.18.200:9100&quot;</span>&#125; == 0</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: tcp_connect_oracle</span><br><span class="line">    <span class="built_in">expr</span>: probe_success&#123;job=<span class="string">&quot;blackbox_exporter_tcp_connect_oracle&quot;</span>&#125; == 0</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: tablespace</span><br><span class="line">    <span class="built_in">expr</span>: tablespace_used_percent&#123;contents=<span class="string">&quot;PERMANENT&quot;</span>&#125; &gt;= 97.5</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: ogg_up</span><br><span class="line">    <span class="built_in">expr</span>: ogg_up != 1</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: ogg_lag_at_chkpt_seconds</span><br><span class="line">    <span class="built_in">expr</span>: ogg_lag_at_chkpt_seconds &gt;= 600</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: ogg_time_since_chkpt_seconds</span><br><span class="line">    <span class="built_in">expr</span>: ogg_time_since_chkpt_seconds &gt;= 600</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: asm</span><br><span class="line">    <span class="built_in">expr</span>: asm_lsdg_usable_file_mb&#123;name=~<span class="string">&quot;SOARHZDG/|SOARCADG/|DASJDATA/|DATA3/|DATA_DG02/&quot;</span>&#125; / 1024 &lt;= 200</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: dg_200</span><br><span class="line">    <span class="built_in">expr</span>: dg_subtract_max_sequence&#123;instance_name=<span class="string">&quot;ZHXTDASJDG&quot;</span>&#125; &gt;= 200</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: dg_30</span><br><span class="line">    <span class="built_in">expr</span>: dg_subtract_max_sequence&#123;instance_name!=<span class="string">&quot;ZHXTDASJDG&quot;</span>&#125; &gt;= 30</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: process</span><br><span class="line">    <span class="built_in">expr</span>: oracle_cur_process / oracle_max_process * 100 &gt;= 85</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">  - alert: session</span><br><span class="line">    <span class="built_in">expr</span>: oracle_cur_session / oracle_max_session * 100 &gt;= 85</span><br><span class="line">    <span class="keyword">for</span>: 1m</span><br><span class="line">    labels:</span><br><span class="line">      service: oracle</span><br><span class="line">    annotations:</span><br><span class="line">      description: <span class="string">&quot;&#123;&#123; <span class="variable">$value</span> &#125;&#125;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="image-20240527162053051.png" alt="image-20240527162053051"></p><p>还需要配置邮箱。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">global:</span><br><span class="line">  smtp_from: <span class="string">&#x27;xx@qq.com&#x27;</span></span><br><span class="line">  smtp_smarthost: <span class="string">&#x27;smtp.qq.com:465&#x27;</span></span><br><span class="line">  smtp_auth_username: <span class="string">&#x27;xx@qq.com&#x27;</span></span><br><span class="line">  smtp_auth_password: <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">  smtp_require_tls: <span class="literal">false</span></span><br><span class="line">route:</span><br><span class="line">  group_by: [<span class="string">&#x27;alertname&#x27;</span>]</span><br><span class="line">  group_wait: 30s</span><br><span class="line">  group_interval: 5m</span><br><span class="line">  repeat_interval: 1h</span><br><span class="line">  receiver: <span class="string">&#x27;email&#x27;</span></span><br><span class="line">  routes:</span><br><span class="line">    - receiver: <span class="string">&#x27;oracle&#x27;</span></span><br><span class="line">      matchers:</span><br><span class="line">        - service=oracle</span><br><span class="line">    - receiver: <span class="string">&#x27;oa&#x27;</span></span><br><span class="line">      matchers:</span><br><span class="line">        - service=oa</span><br><span class="line">receivers:</span><br><span class="line">  - name: <span class="string">&#x27;email&#x27;</span></span><br><span class="line">    email_configs:</span><br><span class="line">      - to: <span class="string">&#x27;xxx@gmail.com, xx@qq.com&#x27;</span></span><br><span class="line">        send_resolved: <span class="literal">true</span></span><br><span class="line">  - name: <span class="string">&#x27;oracle&#x27;</span></span><br><span class="line">    email_configs:</span><br><span class="line">      - to: <span class="string">&#x27;xxx@gmail.com, xxx@qq.com, xxx@qq.com&#x27;</span></span><br><span class="line">        send_resolved: <span class="literal">true</span></span><br><span class="line">  - name: <span class="string">&#x27;oa&#x27;</span></span><br><span class="line">    email_configs:</span><br><span class="line">      - to: <span class="string">&#x27;xxx@gmail.com, xxx@qq.com, xx@qq.com&#x27;</span></span><br><span class="line">        send_resolved: <span class="literal">true</span></span><br><span class="line">inhibit_rules:</span><br><span class="line">  - source_match:</span><br><span class="line">      severity: <span class="string">&#x27;critical&#x27;</span></span><br><span class="line">    target_match:</span><br><span class="line">      severity: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">    equal: [<span class="string">&#x27;alertname&#x27;</span>, <span class="string">&#x27;dev&#x27;</span>, <span class="string">&#x27;instance&#x27;</span>]</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">基于Prometheus + Grafana 的监控系统，主要监控对象，服务器性能状态，oracle运行状态。</summary>
    
    
    
    
    <category term="Prometheus" scheme="https://stealhd.github.io/tags/Prometheus/"/>
    
    <category term="Grafana" scheme="https://stealhd.github.io/tags/Grafana/"/>
    
  </entry>
  
  <entry>
    <title>Install Mysql8 base on Centos7</title>
    <link href="https://stealhd.github.io/2024/05/22/Install-Mysql8-bash-on-Centos7/"/>
    <id>https://stealhd.github.io/2024/05/22/Install-Mysql8-bash-on-Centos7/</id>
    <published>2024-05-22T02:56:30.000Z</published>
    <updated>2024-06-02T16:37:48.827Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Install-Mysql8-base-on-Centos7"><a href="#Install-Mysql8-base-on-Centos7" class="headerlink" title="Install Mysql8 base on Centos7"></a>Install Mysql8 base on Centos7</h2><h3 id="前置条件"><a href="#前置条件" class="headerlink" title="前置条件"></a>前置条件</h3><ol><li>下载 mysql 8 <a href="https://www.oracle.com/mysql/technologies/mysql-enterprise-edition-downloads.html">https://www.oracle.com/mysql/technologies/mysql-enterprise-edition-downloads.html</a></li><li>Centos 7</li></ol><h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -xvf mysql-enterprise-8.4.0-javascript_el7_x86_64_bundle.tar</span><br><span class="line"><span class="comment"># yum 安装</span></span><br><span class="line">yum install -y centos-release-scl </span><br><span class="line">yum install java-1.8.0-openjdk jpackage-utils rh-python38-python</span><br><span class="line">yum localinstall mysql*</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 可能遇到报错</span><br><span class="line">** 发现 9 个已存在的 RPM 数据库问题， &#x27;yum check&#x27; 输出如下：</span><br><span class="line">icedtea-web-1.7.1-1.el7.x86_64 有缺少的需求 java-1.8.0-openjdk</span><br><span class="line">icedtea-web-1.7.1-1.el7.x86_64 有缺少的需求 jpackage-utils</span><br><span class="line">icedtea-web-1.7.1-1.el7.x86_64 有缺少的需求 jpackage-utils</span><br><span class="line">jline-1.0-8.el7.noarch 有缺少的需求 java &gt;= (&#x27;0&#x27;, &#x27;1.5&#x27;, None)</span><br><span class="line">jline-1.0-8.el7.noarch 有缺少的需求 jpackage-utils</span><br><span class="line">rhino-1.7R5-1.el7.noarch 有缺少的需求 jpackage-utils</span><br><span class="line">rhino-1.7R5-1.el7.noarch 有缺少的需求 jpackage-utils</span><br><span class="line">tagsoup-1.2.1-8.el7.noarch 有缺少的需求 jpackage-utils</span><br><span class="line">tagsoup-1.2.1-8.el7.noarch 有缺少的需求 jpackage-utils &gt;= (&#x27;0&#x27;, &#x27;1.6&#x27;, None)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql mysql]<span class="comment"># systemctl start mysqld</span></span><br><span class="line">[root@mysql mysql]<span class="comment"># systemctl enable mysqld</span></span><br><span class="line">[root@mysql mysql]<span class="comment"># systemctl status mysqld</span></span><br><span class="line">● mysqld.service - MySQL Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since 三 2024-05-22 14:50:45 CST; 14s ago</span><br><span class="line">     Docs: man:mysqld(8)</span><br><span class="line">           http://dev.mysql.com/doc/refman/en/using-systemd.html</span><br><span class="line"> Main PID: 6058 (mysqld)</span><br><span class="line">   Status: <span class="string">&quot;Server is operational&quot;</span></span><br><span class="line">   CGroup: /system.slice/mysqld.service</span><br><span class="line">           └─6058 /usr/sbin/mysqld</span><br><span class="line"></span><br><span class="line">5月 22 14:50:35 mysql systemd[1]: Starting MySQL Server...</span><br><span class="line">5月 22 14:50:45 mysql systemd[1]: Started MySQL Server.</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看初始密码</span></span><br><span class="line">[root@mysql mysql]<span class="comment">#  grep &#x27;temporary password&#x27; /var/log/mysqld.log</span></span><br><span class="line">2024-05-22T06:50:43.504416Z 6 [Note] [MY-010454] [Server] A temporary password is generated <span class="keyword">for</span> root@localhost: da9!&lt;k:j=L)9</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[root@mysql mysql]<span class="comment"># mysql -uroot -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 9</span><br><span class="line">Server version: 8.4.0-javascript-commercial</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2024, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"><span class="comment"># 修改密码</span></span><br><span class="line">mysql&gt; ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;F123mysql!&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改密码策略</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> global  validate_password.length = 0;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">set</span> global validate_password.mixed_case_count = 0;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;  <span class="built_in">set</span> global  validate_password.number_count = 0;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">set</span> global validate_password.special_char_count = 0;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"> </span><br><span class="line">mysql&gt;  ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;mysql&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许远程访问</span></span><br><span class="line">mysql&gt; update user <span class="built_in">set</span> host=<span class="string">&#x27;%&#x27;</span> <span class="built_in">where</span> user =<span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Install-Mysql8-base-on-Centos7&quot;&gt;&lt;a href=&quot;#Install-Mysql8-base-on-Centos7&quot; class=&quot;headerlink&quot; title=&quot;Install Mysql8 base on Centos7&quot;&gt;</summary>
      
    
    
    
    
    <category term="Mysql" scheme="https://stealhd.github.io/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>DMDB8 install Base on Kylin</title>
    <link href="https://stealhd.github.io/2024/05/17/DMDB-install-Base-on-Kylin/"/>
    <id>https://stealhd.github.io/2024/05/17/DMDB-install-Base-on-Kylin/</id>
    <published>2024-05-17T04:57:41.000Z</published>
    <updated>2024-05-23T07:19:34.353Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Installing-DMDB8-base-on-Kylin"><a href="#Installing-DMDB8-base-on-Kylin" class="headerlink" title="Installing DMDB8 base on Kylin"></a>Installing DMDB8 base on Kylin</h2><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><ol><li>Kylin  </li><li>DMDB8 <a href="https://eco.dameng.com/download/?_blank">产品下载 | 达梦数据库 (dameng.com)</a></li></ol><h3 id="DMDB安装"><a href="#DMDB安装" class="headerlink" title="DMDB安装"></a>DMDB安装</h3><h4 id="系统环境配置"><a href="#系统环境配置" class="headerlink" title="系统环境配置"></a>系统环境配置</h4><p>注：官方很详细<a href="https://eco.dameng.com/document/dm/zh-cn/pm/install-uninstall.html#2.2">安装及卸载 | 达梦技术文档 (dameng.com)</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改 dmdba 打开文件限制 其他具体可以参考官方文档</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;dmdba  hard  nofile  65536</span></span><br><span class="line"><span class="string">dmdba  soft  nofile  65536&#x27;</span> &gt;&gt;  /etc/security/limits.conf</span><br><span class="line"><span class="comment">#  创建安装用户</span></span><br><span class="line">groupadd -g 12349 dinstall</span><br><span class="line">useradd -u 12345 -g dinstall -m -d /home/dmdba -s /bin/bash dmdba</span><br><span class="line">passwd dmdba</span><br><span class="line"><span class="comment"># 输入密码</span></span><br></pre></td></tr></table></figure><h4 id="命令行安装安装"><a href="#命令行安装安装" class="headerlink" title="命令行安装安装"></a>命令行安装安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 挂载iso </span></span><br><span class="line">mount -o loop dm8_20230712_FTarm_kylin10_sp1_64.iso /mnt &amp;&amp; <span class="built_in">cd</span> /mnt  </span><br><span class="line"><span class="built_in">cp</span> DMInstall.bin /home/dmdba</span><br><span class="line"><span class="comment"># 授权</span></span><br><span class="line"><span class="built_in">chown</span> dmdba:dinstall /home/dmdba/DMInstall.bin</span><br><span class="line">su - dmdba</span><br><span class="line"><span class="built_in">mkdir</span> temp</span><br><span class="line"><span class="comment"># 指定临时空间 2G 够的可以不指定</span></span><br><span class="line"><span class="built_in">export</span> DM_INSTALL_TMPDIR=/home/dmdba/temp</span><br><span class="line"><span class="comment">#命令行安装</span></span><br><span class="line"><span class="built_in">cd</span> &amp;&amp; ./DMInstall.bin -i</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">[dmdba@dmdb ~]$ ./DMInstall.bin -i</span><br><span class="line">安装语言: </span><br><span class="line">[1]: 简体中文</span><br><span class="line">[2]: English</span><br><span class="line">请选择安装语言 [1]:1</span><br><span class="line">解压安装程序......... </span><br><span class="line">欢迎使用达梦数据库安装程序</span><br><span class="line"></span><br><span class="line">是否输入Key文件路径? (Y/y:是 N/n:否) [Y/y]:n</span><br><span class="line"></span><br><span class="line">是否设置时区? (Y/y:是 N/n:否) [Y/y]:y</span><br><span class="line">设置时区:</span><br><span class="line">[ 1]: (GTM-12:00) 日界线西</span><br><span class="line">[ 2]: (GTM-11:00) 萨摩亚群岛</span><br><span class="line">[ 3]: (GTM-10:00) 夏威夷</span><br><span class="line">[ 4]: (GTM-09:00) 阿拉斯加</span><br><span class="line">[ 5]: (GTM-08:00) 太平洋时间（美国和加拿大）</span><br><span class="line">[ 6]: (GTM-07:00) 亚利桑那</span><br><span class="line">[ 7]: (GTM-06:00) 中部时间（美国和加拿大）</span><br><span class="line">[ 8]: (GTM-05:00) 东部部时间（美国和加拿大）</span><br><span class="line">[ 9]: (GTM-04:00) 大西洋时间（美国和加拿大）</span><br><span class="line">[10]: (GTM-03:00) 巴西利亚</span><br><span class="line">[11]: (GTM-02:00) 中大西洋</span><br><span class="line">[12]: (GTM-01:00) 亚速尔群岛</span><br><span class="line">[13]: (GTM) 格林威治标准时间</span><br><span class="line">[14]: (GTM+01:00) 萨拉热窝</span><br><span class="line">[15]: (GTM+02:00) 开罗</span><br><span class="line">[16]: (GTM+03:00) 莫斯科</span><br><span class="line">[17]: (GTM+04:00) 阿布扎比</span><br><span class="line">[18]: (GTM+05:00) 伊斯兰堡</span><br><span class="line">[19]: (GTM+06:00) 达卡</span><br><span class="line">[20]: (GTM+07:00) 曼谷，河内</span><br><span class="line">[21]: (GTM+08:00) 中国标准时间</span><br><span class="line">[22]: (GTM+09:00) 首尔</span><br><span class="line">[23]: (GTM+10:00) 关岛</span><br><span class="line">[24]: (GTM+11:00) 所罗门群岛</span><br><span class="line">[25]: (GTM+12:00) 斐济</span><br><span class="line">[26]: (GTM+13:00) 努库阿勒法</span><br><span class="line">[27]: (GTM+14:00) 基里巴斯</span><br><span class="line">请选择时区 [21]:21</span><br><span class="line"></span><br><span class="line">安装类型:</span><br><span class="line">1 典型安装</span><br><span class="line">2 服务器</span><br><span class="line">3 客户端</span><br><span class="line">4 自定义</span><br><span class="line">请选择安装类型的数字序号 [1 典型安装]:1</span><br><span class="line">所需空间: 2310M</span><br><span class="line"></span><br><span class="line">请选择安装目录 [/home/dmdba/dmdbms]:</span><br><span class="line">可用空间: 26G</span><br><span class="line">是否确认安装路径(/home/dmdba/dmdbms)? (Y/y:是 N/n:否)  [Y/y]:y</span><br><span class="line"></span><br><span class="line">安装前小结</span><br><span class="line">安装位置: /home/dmdba/dmdbms</span><br><span class="line">所需空间: 2310M</span><br><span class="line">可用空间: 26G</span><br><span class="line">版本信息: </span><br><span class="line">有效日期: </span><br><span class="line">安装类型: 典型安装</span><br><span class="line">是否确认安装? (Y/y:是 N/n:否):y</span><br><span class="line">2024-05-18 00:40:51 </span><br><span class="line">[INFO] 安装达梦数据库...</span><br><span class="line">2024-05-18 00:40:52 </span><br><span class="line">[INFO] 安装 基础 模块...</span><br><span class="line">2024-05-18 00:40:54 </span><br><span class="line">[INFO] 安装 服务器 模块...</span><br><span class="line">2024-05-18 00:40:55 </span><br><span class="line">[INFO] 安装 客户端 模块...</span><br><span class="line">2024-05-18 00:40:56 </span><br><span class="line">[INFO] 安装 驱动 模块...</span><br><span class="line">2024-05-18 00:40:56 </span><br><span class="line">[INFO] 安装 手册 模块...</span><br><span class="line">2024-05-18 00:40:56 </span><br><span class="line">[INFO] 安装 服务 模块...</span><br><span class="line">2024-05-18 00:40:57 </span><br><span class="line">[INFO] 移动日志文件。</span><br><span class="line">2024-05-18 00:40:57 </span><br><span class="line">[INFO] 安装达梦数据库完成。</span><br><span class="line"></span><br><span class="line">请以root系统用户执行命令:</span><br><span class="line">/home/dmdba/dmdbms/script/root/root_installer.sh</span><br><span class="line"></span><br><span class="line">安装结束</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="配置实例"><a href="#配置实例" class="headerlink" title="配置实例"></a>配置实例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># root 创建文件目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /dmdata/data</span><br><span class="line"><span class="built_in">chown</span> dmdba:dinstall /dmdata</span><br><span class="line">su - dmdba</span><br><span class="line"><span class="built_in">cd</span> /home/dmdba/dmdbms/bin</span><br><span class="line">./dminit path=/dmdata/data</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[dmdba@dmdb bin]$ ./dminit path=/dmdata/data</span><br><span class="line">initdb V8</span><br><span class="line">db version: 0x7000c</span><br><span class="line">file dm.key not found, use default license!</span><br><span class="line">License will expire on 2025-03-21</span><br><span class="line">Normal of FAST</span><br><span class="line">Normal of DEFAULT</span><br><span class="line">Normal of RECYCLE</span><br><span class="line">Normal of KEEP</span><br><span class="line">Normal of ROLL</span><br><span class="line"></span><br><span class="line"> log file path: /dmdata/data/DAMENG/DAMENG01.log</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> log file path: /dmdata/data/DAMENG/DAMENG02.log</span><br><span class="line"></span><br><span class="line">write to dir [/dmdata/data/DAMENG].</span><br><span class="line">create dm database success. 2024-05-18 00:49:00</span><br></pre></td></tr></table></figure><p>启动数据库 默认 账号密码 SYSDBA&#x2F;SYSDBA</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/home/dmdba/dmdbms/bin/DmServiceDMTEST start</span><br><span class="line">/home/dmdba/dmdbms/bin/DmServiceDMTEST status</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动成功</span></span><br><span class="line">[dmdba@dmdb bin]$ /home/dmdba/dmdbms/bin/DmServiceDMTEST status </span><br><span class="line">DmServiceDMTEST (pid 6308) is running</span><br></pre></td></tr></table></figure><p>进入数据库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/home/dmdba/dmdbms/bin/disql</span><br><span class="line"><span class="comment"># 安装完成</span></span><br><span class="line">[dmdba@dmdb bin]$ /home/dmdba/dmdbms/bin/disql</span><br><span class="line">disql V8</span><br><span class="line">用户名:SYSDBA</span><br><span class="line">密码:</span><br><span class="line"></span><br><span class="line">服务器[LOCALHOST:5236]:处于普通打开状态</span><br><span class="line">登录使用时间 : 3.155(ms)</span><br><span class="line">SQL&gt; </span><br></pre></td></tr></table></figure><h4 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h4><h5 id="注册服务"><a href="#注册服务" class="headerlink" title="注册服务"></a>注册服务</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/dmdba/dmdbms/script/root/</span><br><span class="line"><span class="comment"># 注意自己路径</span></span><br><span class="line"> ./dm_service_installer.sh -t dmserver -dm_ini /dmdata/data/DAMENG/dm.ini -p DAMENG</span><br></pre></td></tr></table></figure><h5 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su - dmdba</span><br><span class="line">vim .bash_profile</span><br><span class="line"><span class="comment"># 添加$DM_HOME/bin</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin:<span class="variable">$DM_HOME</span>/bin</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Installing-DMDB8-base-on-Kylin&quot;&gt;&lt;a href=&quot;#Installing-DMDB8-base-on-Kylin&quot; class=&quot;headerlink&quot; title=&quot;Installing DMDB8 base on Kylin&quot;&gt;</summary>
      
    
    
    
    
    <category term="DMDB" scheme="https://stealhd.github.io/tags/DMDB/"/>
    
    <category term="Kylin" scheme="https://stealhd.github.io/tags/Kylin/"/>
    
  </entry>
  
  <entry>
    <title>Installing Oracle GoldenGate</title>
    <link href="https://stealhd.github.io/2024/05/15/Installing-Oracle-GoldenGate/"/>
    <id>https://stealhd.github.io/2024/05/15/Installing-Oracle-GoldenGate/</id>
    <published>2024-05-15T01:31:44.000Z</published>
    <updated>2024-05-23T02:12:34.775Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Installing-Oracle-GoldenGate-21"><a href="#Installing-Oracle-GoldenGate-21" class="headerlink" title="Installing  Oracle GoldenGate 21"></a>Installing  Oracle GoldenGate 21</h1><p>需求：同步oracle（192.168.192.119源端）表hc.test 至oracle（192.168.192.119目标端）表hc.test ，采用集成模式，无ddl同步。</p><p>已安装oracle 11.2.0.4.0。</p><h2 id="前置条件"><a href="#前置条件" class="headerlink" title="前置条件"></a>前置条件</h2><ol><li>Centos 7</li><li>Oracle11g数据库</li></ol><h2 id="数据库前置操作"><a href="#数据库前置操作" class="headerlink" title="数据库前置操作"></a>数据库前置操作</h2><ol><li><p>开归档</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 源端目标端都需要 需要重启数据库</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> archive log list;</span><br><span class="line">Database log mode              Archive Mode</span><br><span class="line">Automatic archival             Enabled  # 开启</span><br><span class="line">Archive destination            USE_DB_RECOVERY_FILE_DEST</span><br><span class="line">Oldest online log sequence     <span class="number">5</span></span><br><span class="line">Next log sequence <span class="keyword">to</span> archive   <span class="number">7</span></span><br><span class="line"><span class="keyword">Current</span> log sequence           <span class="number">7</span></span><br></pre></td></tr></table></figure></li><li><p>开启附加日志&#x2F;开启复制参数&#x2F;配置STREAMS_POOL_SIZE</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 源端目标端都需要</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> supplemental_log_data_min, force_logging <span class="keyword">FROM</span> v$database;</span><br><span class="line"># YES 为已经开启</span><br><span class="line">#SUPPLEME <span class="keyword">FOR</span></span><br><span class="line">#<span class="comment">-------- ---</span></span><br><span class="line">#YES      YES</span><br><span class="line"><span class="keyword">alter</span> database <span class="keyword">add</span> SUPPLEMENTAL LOG DATA;</span><br><span class="line"><span class="keyword">ALTER</span> DATABASE FORCE LOGGING;</span><br><span class="line"></span><br><span class="line"># 开启复制参数</span><br><span class="line"><span class="keyword">alter</span>  <span class="keyword">system</span>  <span class="keyword">set</span>  enable_goldengate_replication<span class="operator">=</span><span class="literal">true</span>;</span><br><span class="line">#sho <span class="keyword">parameter</span> enable_goldengate_replication</span><br><span class="line"></span><br><span class="line">#NAME                                 TYPE        <span class="keyword">VALUE</span></span><br><span class="line">#<span class="comment">------------------------------------ ----------- ------------------------------</span></span><br><span class="line">#enable_goldengate_replication        <span class="type">boolean</span>     <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line">#配置STREAMS_POOL_SIZE</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">SET</span> STREAMS_POOL_SIZE <span class="operator">=</span> <span class="number">128</span>M <span class="keyword">scope</span><span class="operator">=</span><span class="keyword">both</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>创建ogg用户授权</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#源端</span><br><span class="line"># 需要修改自己的路径</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space ogg_data datafile <span class="string">&#x27;/u01/app/oracle/oradata/orcl/ogg_data.dbf&#x27;</span> size <span class="number">200</span>m autoextend <span class="keyword">on</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> oggadmin identified <span class="keyword">by</span> oggadmin <span class="keyword">default</span> tablespace ogg_data;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CONNECT</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CREATE</span> SESSION <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALTER</span> SESSION <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> RESOURCE <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ANY</span> DICTIONARY <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ANY</span> <span class="keyword">TABLE</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> FLASHBACK <span class="keyword">ANY</span> <span class="keyword">TABLE</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALTER</span> <span class="keyword">ANY</span> <span class="keyword">TABLE</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line">#同步测试表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> hc identified <span class="keyword">by</span> hc;</span><br><span class="line"><span class="keyword">grant</span> dba <span class="keyword">to</span> hc;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> hc.test (</span><br><span class="line">id number(<span class="number">20</span>),</span><br><span class="line">name varchar2(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 目标端</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space ogg_data datafile <span class="string">&#x27;/u01/app/oracle/oradata/orcl/ogg_data.dbf&#x27;</span> size <span class="number">200</span>m autoextend <span class="keyword">on</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> oggadmin identified <span class="keyword">by</span> oggadmin <span class="keyword">default</span> tablespace ogg_data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALTER</span> SESSION <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CREATE</span> SESSION <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CONNECT</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> RESOURCE <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ANY</span> DICTIONARY <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ANY</span> <span class="keyword">TABLE</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> FLASHBACK <span class="keyword">ANY</span> <span class="keyword">TABLE</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">INSERT</span> <span class="keyword">ANY</span> <span class="keyword">TABLE</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">UPDATE</span> <span class="keyword">ANY</span> <span class="keyword">TABLE</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">DELETE</span> <span class="keyword">ANY</span> <span class="keyword">TABLE</span> <span class="keyword">TO</span> oggadmin;</span><br><span class="line">#同步测试表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> hc identified <span class="keyword">by</span> hc;</span><br><span class="line"><span class="keyword">grant</span> dba <span class="keyword">to</span> hc;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> hc.test (</span><br><span class="line">id number(<span class="number">20</span>),</span><br><span class="line">name varchar2(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>OGG-02912 处理</p></li></ol>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ogg 安装目录</span></span><br><span class="line"><span class="built_in">cd</span> /home/oracle/ogg</span><br><span class="line">[oracle@oracle2 ogg]$  sqlplus / as sysdba</span><br><span class="line"></span><br><span class="line">SQL*Plus: Release 11.2.0.4.0 Production on Thu May 16 14:18:41 2024</span><br><span class="line"></span><br><span class="line">Copyright (c) 1982, 2013, Oracle.  All rights reserved.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Connected to:</span><br><span class="line">Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span><br><span class="line">With the Partitioning, OLAP, Data Mining and Real Application Testing options</span><br><span class="line"></span><br><span class="line">SQL&gt; @prvtlmpg.plb</span><br><span class="line"></span><br><span class="line">Oracle GoldenGate Workaround prvtlmpg</span><br><span class="line"></span><br><span class="line">This script provides a temporary workaround <span class="keyword">for</span> bug 17030189.</span><br><span class="line">It is strongly recommended that you apply the official Oracle</span><br><span class="line">Patch <span class="keyword">for</span> bug 17030189 from My Oracle Support instead of using</span><br><span class="line">this workaround.</span><br><span class="line"></span><br><span class="line">This script must be executed <span class="keyword">in</span> the mining database of Integrated</span><br><span class="line">Capture. You will be prompted <span class="keyword">for</span> the username of the mining user.</span><br><span class="line">Use a double quoted identifier <span class="keyword">if</span> the username is <span class="keyword">case</span> sensitive</span><br><span class="line">or contains special characters. In a CDB environment, this script</span><br><span class="line">must be executed from the CDB<span class="variable">$ROOT</span> container and the mining user</span><br><span class="line">must be a common user.</span><br><span class="line"></span><br><span class="line">===========================  WARNING  ==========================</span><br><span class="line">You MUST stop all Integrated Captures that belong to this mining</span><br><span class="line">user before proceeding!</span><br><span class="line">================================================================</span><br><span class="line"></span><br><span class="line">Enter Integrated Capture mining user: oggadmin</span><br><span class="line"></span><br><span class="line">Installing workaround...</span><br><span class="line">No errors.</span><br><span class="line">No errors.</span><br><span class="line">No errors.</span><br><span class="line">Installation completed.</span><br><span class="line">SQL&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="图形化安装ogg-21"><a href="#图形化安装ogg-21" class="headerlink" title="图形化安装ogg 21"></a>图形化安装ogg 21</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>213000_fbo_ggs_Linux_x64_Oracle_shiphome.zip（<a href="https://www.oracle.com/middleware/technologies/goldengate-downloads.html#">https://www.oracle.com/middleware/technologies/goldengate-downloads.html#</a> ）</p><p>注:数据库安装可以看 文章 centos 7 oracle11g install</p><h3 id="解压ogg"><a href="#解压ogg" class="headerlink" title="解压ogg"></a>解压ogg</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建ogg安装目录</span></span><br><span class="line"><span class="built_in">cd</span> &amp;&amp; <span class="built_in">mkdir</span> ogg &amp;&amp; <span class="built_in">cd</span></span><br><span class="line"><span class="comment"># ogg在/home/oracle目录下 解压ogg</span></span><br><span class="line">unzip unzip 213000_fbo_ggs_Linux_x64_Oracle_shiphome.zip</span><br><span class="line"><span class="built_in">cd</span> fbo_ggs_Linux_x64_Oracle_shiphome/Disk1/</span><br><span class="line"><span class="comment"># 192.168.192.1 是填写本机同网段ip</span></span><br><span class="line">DISPLAY=192.168.192.1:0.0; <span class="built_in">export</span> DISPLAY</span><br><span class="line"><span class="comment"># 处理中文乱码</span></span><br><span class="line"><span class="built_in">export</span> LC_ALL=en_US</span><br><span class="line"><span class="built_in">cd</span> fbo_ggs_Linux_x64_Oracle_shiphome/Disk1/</span><br><span class="line"><span class="comment"># 图形化安装ogg</span></span><br><span class="line">./runInstaller</span><br></pre></td></tr></table></figure><p><img src="image-20240515153351706.png" alt="image-20240515153351706"></p><p><img src="image-20240515153405588.png" alt="image-20240515153405588"></p><p><img src="image-20240515153416219.png" alt="image-20240515153416219"></p><p><img src="image-20240515153450475.png" alt="image-20240515153450475"></p><p>安装完成。</p><h2 id="配置ogg"><a href="#配置ogg" class="headerlink" title="配置ogg"></a>配置ogg</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加export TNS_ADMIN=$ORACLE_HOME/network/admin</span></span><br><span class="line">su - oracle</span><br><span class="line">vim .bash_profile</span><br><span class="line"><span class="comment"># 添加</span></span><br><span class="line"><span class="built_in">export</span> TNS_ADMIN=<span class="variable">$ORACLE_HOME</span>/network/admin</span><br><span class="line"><span class="comment"># ogg 安装目录</span></span><br><span class="line"><span class="built_in">cd</span> /home/oracle/ogg &amp;&amp; ./ggsci</span><br><span class="line"><span class="comment"># add  credentialstore </span></span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; add  credentialstore </span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; alter  credentialstore  add  user  oggadmin@192.168.192.119:1521/orcl,  password  oggadmin  <span class="built_in">alias</span> ggs </span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; alter  credentialstore  add  user  oggadmin@192.168.192.200:1521/orcl,  password  oggadmin  <span class="built_in">alias</span> ggt</span><br><span class="line"><span class="comment"># 验证info  credentialstore </span></span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt;  info  credentialstore </span><br><span class="line"></span><br><span class="line"><span class="comment">#GGSCI（oracle，作为 oggadmin@orcl） 10&gt; info  credentialstore</span></span><br><span class="line"><span class="comment">#正在从身份证明存储中读取：</span></span><br><span class="line"><span class="comment">#默认域：OracleGoldenGate</span></span><br><span class="line"><span class="comment">#  别名：ggs</span></span><br><span class="line"><span class="comment">#  用户 ID：oggadmin@192.168.192.119:1521/orcl</span></span><br><span class="line"><span class="comment">#  别名：ggt</span></span><br><span class="line"><span class="comment">#  用户 ID：oggadmin@192.168.192.200:1521/orcl</span></span><br></pre></td></tr></table></figure><h3 id="配置mgr进程"><a href="#配置mgr进程" class="headerlink" title="配置mgr进程"></a>配置mgr进程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 11&gt; EDIT params mgr</span><br><span class="line"></span><br><span class="line">PORT 7809</span><br><span class="line">AUTORESTART ER *,RETRIES 5,WAITMINUTES 1,RESETMINUTES 60</span><br><span class="line">PURGEOLDEXTRACTS ./dirdat/*,usecheckpoints, minkeepdays 15</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="配置源端抽取进程"><a href="#配置源端抽取进程" class="headerlink" title="配置源端抽取进程"></a>配置源端抽取进程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># 添加附加日志 测试表</span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 13&gt; add trandata hc.test</span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 13&gt; EDIT params ext</span><br><span class="line"></span><br><span class="line">EXTRACT ext</span><br><span class="line">USERIDALIAS ggs</span><br><span class="line">TRANLOGOPTIONS INTEGRATEDPARAMS (PARALLELISM 8)</span><br><span class="line">TRANLOGOPTIONS INTEGRATEDPARAMS (_LOGMINER_READ_BUFFERS 256)</span><br><span class="line">--TRANLOGOPTIONS INTEGRATEDPARAMS (max_sga_size 200, parallelism 1)</span><br><span class="line">STATOPTIONS REPORTFETCH</span><br><span class="line">LOGALLSUPCOLS</span><br><span class="line">NOCOMPRESSUPDATES</span><br><span class="line">UPDATERECORDFORMAT FULL</span><br><span class="line">--UPDATERECORDFORMAT COMPACT</span><br><span class="line">DBOPTIONS ALLOWUNUSEDCOLUMN</span><br><span class="line">TRANLOGOPTIONS EXCLUDEUSER oggadmin</span><br><span class="line">FETCHOPTIONS NOUSESNAPSHOT</span><br><span class="line">EXTTRAIL ./dirdat/ie</span><br><span class="line">--DISCARDFILE ./dirrpt/ext1.dsc, PURGE, MEGABYTES 1024</span><br><span class="line">DISCARDFILE ./dirrpt/ext1.dsc, APPEND, MEGABYTES 1024</span><br><span class="line">WARNLONGTRANS 1H, CHECKINTERVAL 5M</span><br><span class="line">CACHEMGR CACHESIZE 1024MB, CACHEDIRECTORY ./dirtmp</span><br><span class="line">table hc.test;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 添加进程</span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; ADD EXTRACT ext INTEGRATED TRANLOG BEGIN NOW </span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; ADD EXTTRAIL ./dirdat/ie EXTRACT ext MEGABYTES 1024 </span><br><span class="line">#注册进程</span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; REGISTER EXTRACT ext DATABASE </span><br></pre></td></tr></table></figure><h3 id="配置应用进程"><a href="#配置应用进程" class="headerlink" title="配置应用进程"></a>配置应用进程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; dblogin useridalias ggt</span><br><span class="line"><span class="comment">#添加 checkpoint表</span></span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; add checkpoint table oggadmin.ggs_checkpoint</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置 GLOBALS</span></span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; EDIT PARAMS ./GLOBALS</span><br><span class="line">checkpointtable oggadmin.checkpoint</span><br><span class="line"></span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 17&gt; edit params REPEXT</span><br><span class="line"></span><br><span class="line">REPLICAT repext</span><br><span class="line">USERIDALIAS ggt</span><br><span class="line">--REPERROR (DEFAULT, ABEND)</span><br><span class="line">DISCARDFILE ./dirrpt/rep.dsc, PURGE, MEGABYTES 1024</span><br><span class="line">GETTRUNCATES</span><br><span class="line">ALLOWNOOPUPDATES</span><br><span class="line">REPORTCOUNT EVERY 60 SECONDS, RATE</span><br><span class="line">REPORTROLLOVER AT 01:00</span><br><span class="line">DBOPTIONS ENABLE_INSTANTIATION_FILTERING</span><br><span class="line">DBOPTIONS SUPPRESSTRIGGERS</span><br><span class="line">--DBOPTIONS DISABLECOMMITNOWAIT</span><br><span class="line">--MAP_PARALLELISM 4</span><br><span class="line">--MIN_APPLY_PARALLELISM 2</span><br><span class="line">--MAX_APPLY_PARALLELISM 10</span><br><span class="line">--SPLIT_TRANS_RECS 1000</span><br><span class="line">--DDL INCLUDE ALL</span><br><span class="line">--DDLOPTIONS REPORT</span><br><span class="line">MAP hc.test, TARGET hc.test;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---添加进程 </span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; ADD REPLICAT repext EXTTRAIL ./dirdat/ie checkpointtable oggadmin.checkpoint</span><br><span class="line">---注册进程 </span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; dblogin useridalias ggt </span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; register replicat repext database</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>测试说明：本地ogg仅配置抽取和应用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动进程。</span></span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; start *</span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 20&gt; info all</span><br><span class="line"></span><br><span class="line">MANAGER     RUNNING</span><br><span class="line">EXTRACT     RUNNING     EXT         00:00:06      00:00:06</span><br><span class="line">REPLICAT    RUNNING     REPEXT      00:00:00      00:00:03</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>插入数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> hc.test <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> hc.test;</span><br></pre></td></tr></table></figure><p><img src="image-20240516154741299.png" alt="image-20240516154741299"></p><p>目标端查看</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> hc.test;</span><br></pre></td></tr></table></figure><p><img src="image-20240516154854898.png" alt="image-20240516154854898"></p><h2 id="异构测试"><a href="#异构测试" class="headerlink" title="异构测试"></a>异构测试</h2><h3 id="表异构"><a href="#表异构" class="headerlink" title="表异构"></a>表异构</h3><p>说明：</p><ol><li>源端表与目标端表字段异构。</li><li>采用抽取+pump+replicate三进程</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 源端创建</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> hc.test2 (</span><br><span class="line">id number(<span class="number">20</span>),</span><br><span class="line">name varchar2(<span class="number">20</span>),</span><br><span class="line">age number(<span class="number">10</span>)</span><br><span class="line">)</span><br><span class="line">#目标端 只同步 id 和 age 字段</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> hc.test2 (</span><br><span class="line">id number(<span class="number">20</span>),</span><br><span class="line">age number(<span class="number">10</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="配置抽取进程"><a href="#配置抽取进程" class="headerlink" title="配置抽取进程"></a>配置抽取进程</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  源端配置</span></span><br><span class="line"><span class="comment"># edit params ext_t2 </span></span><br><span class="line">EXTRACT ext_t2</span><br><span class="line">USERIDALIAS ggs</span><br><span class="line">TRANLOGOPTIONS INTEGRATEDPARAMS (PARALLELISM 8)</span><br><span class="line">TRANLOGOPTIONS INTEGRATEDPARAMS (_LOGMINER_READ_BUFFERS 256)</span><br><span class="line">--TRANLOGOPTIONS INTEGRATEDPARAMS (max_sga_size 200, parallelism 1)</span><br><span class="line">STATOPTIONS REPORTFETCH</span><br><span class="line">LOGALLSUPCOLS</span><br><span class="line">NOCOMPRESSUPDATES</span><br><span class="line">UPDATERECORDFORMAT FULL</span><br><span class="line">--UPDATERECORDFORMAT COMPACT</span><br><span class="line">DBOPTIONS ALLOWUNUSEDCOLUMN</span><br><span class="line">TRANLOGOPTIONS EXCLUDEUSER oggadmin</span><br><span class="line">FETCHOPTIONS NOUSESNAPSHOT</span><br><span class="line">EXTTRAIL ./dirdat/te</span><br><span class="line">--DISCARDFILE ./dirrpt/ext1.dsc, PURGE, MEGABYTES 1024</span><br><span class="line">DISCARDFILE ./dirrpt/ext2.dsc, APPEND, MEGABYTES 1024</span><br><span class="line">WARNLONGTRANS 1H, CHECKINTERVAL 5M</span><br><span class="line">CACHEMGR CACHESIZE 1024MB, CACHEDIRECTORY ./dirtmp</span><br><span class="line">table hc.test2,cols (<span class="built_in">id</span>,age);</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ADD EXTRACT ext_t2 INTEGRATED TRANLOG BEGIN NOW </span><br><span class="line">ADD EXTTRAIL ./dirdat/te EXTRACT ext_t2 MEGABYTES 1024 </span><br><span class="line">register extract ext_t2 database</span><br></pre></td></tr></table></figure><p><img src="image-20240521001401297.png" alt="image-20240521001401297"></p><h4 id="配置推送进程"><a href="#配置推送进程" class="headerlink" title="配置推送进程"></a>配置推送进程</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  源端配置</span></span><br><span class="line"><span class="comment"># edit param dp_t2 </span></span><br><span class="line">EXTRACT dp_t2 </span><br><span class="line">useridalias ggs </span><br><span class="line">DISCARDFILE ./dirrpt/dpet2.dsc, APPEND, MEGABYTES 1024 </span><br><span class="line">RMTHOST 192.168.192.200, MGRPORT 7809 </span><br><span class="line">RMTTRAIL ./dirdat/te</span><br><span class="line">--PASSTHRU </span><br><span class="line">sequence hc.*; </span><br><span class="line">table hc.test2;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">add  extract  dp_t2  EXTTRAILSOURCE  ./dirdat/te </span><br><span class="line">add  rmttrail  ./dirdat/te  extract  dp_t2  MEGABYTES  1024</span><br></pre></td></tr></table></figure><p><img src="image-20240521001358592.png" alt="image-20240521001358592"></p><h4 id="配置应用进程-1"><a href="#配置应用进程-1" class="headerlink" title="配置应用进程"></a>配置应用进程</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 目标端配置 edit param rep_ext</span></span><br><span class="line">REPLICAT rep_ext </span><br><span class="line">USERIDALIAS ggt </span><br><span class="line">--REPERROR (DEFAULT, ABEND) </span><br><span class="line">DISCARDFILE ./dirrpt/dscte.dsc, PURGE, MEGABYTES 1024 </span><br><span class="line">discardrollover at 02:00 </span><br><span class="line">GETTRUNCATES </span><br><span class="line">ALLOWNOOPUPDATES </span><br><span class="line">REPORTCOUNT EVERY 60 SECONDS, RATE </span><br><span class="line">REPORTROLLOVER AT 01:00 </span><br><span class="line">DBOPTIONS ENABLE_INSTANTIATION_FILTERING </span><br><span class="line">DBOPTIONS SUPPRESSTRIGGERS </span><br><span class="line">--DBOPTIONS DISABLECOMMITNOWAIT </span><br><span class="line">--MAP_PARALLELISM 4 </span><br><span class="line">--MIN_APPLY_PARALLELISM 2 </span><br><span class="line">--MAX_APPLY_PARALLELISM 10 </span><br><span class="line">--SPLIT_TRANS_RECS 1000 </span><br><span class="line">MAP hc.test2, TARGET hc.test2; </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ADD REPLICAT rep_ext EXTTRAIL ./dirdat/te checkpointtable oggadmin.checkpoint </span><br><span class="line">dblogin useridalias ggt </span><br><span class="line">register replicat rep_ext database </span><br></pre></td></tr></table></figure><p><img src="image-20240521001231691.png" alt="image-20240521001231691"></p><h4 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 源端</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> hc.test2 (id,age) <span class="keyword">values</span> (<span class="number">1</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">select</span><span class="operator">*</span> <span class="keyword">from</span> hc.test2</span><br></pre></td></tr></table></figure><p><img src="image-20240521000544465.png" alt="image-20240521000544465"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 目标端查看</span><br><span class="line">select* from hc.test2</span><br></pre></td></tr></table></figure><p><img src="image-20240521000629813.png" alt="image-20240521000629813"></p><h3 id="库异构"><a href="#库异构" class="headerlink" title="库异构"></a>库异构</h3><p>注：oracle 同步至 MySQL 8.4</p><h4 id="源端抽取进程"><a href="#源端抽取进程" class="headerlink" title="源端抽取进程"></a>源端抽取进程</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 88&gt; view params EXT_TS</span><br><span class="line"></span><br><span class="line">EXTRACT ext_ts</span><br><span class="line">USERIDALIAS ggs</span><br><span class="line">TRANLOGOPTIONS INTEGRATEDPARAMS (PARALLELISM 8)</span><br><span class="line">TRANLOGOPTIONS INTEGRATEDPARAMS (_LOGMINER_READ_BUFFERS 256)</span><br><span class="line">--TRANLOGOPTIONS INTEGRATEDPARAMS (max_sga_size 200, parallelism 1)</span><br><span class="line">STATOPTIONS REPORTFETCH</span><br><span class="line">LOGALLSUPCOLS</span><br><span class="line">NOCOMPRESSUPDATES</span><br><span class="line">UPDATERECORDFORMAT FULL</span><br><span class="line">--UPDATERECORDFORMAT COMPACT</span><br><span class="line">DBOPTIONS ALLOWUNUSEDCOLUMN</span><br><span class="line">TRANLOGOPTIONS EXCLUDEUSER oggadmin</span><br><span class="line">FETCHOPTIONS NOUSESNAPSHOT</span><br><span class="line">EXTTRAIL ./dirdat/ts</span><br><span class="line">--DISCARDFILE ./dirrpt/ext3.dsc, PURGE, MEGABYTES 1024</span><br><span class="line">DISCARDFILE ./dirrpt/ext3.dsc, APPEND, MEGABYTES 1024</span><br><span class="line">WARNLONGTRANS 1H, CHECKINTERVAL 5M</span><br><span class="line">CACHEMGR CACHESIZE 1024MB, CACHEDIRECTORY ./dirtmp</span><br><span class="line">table hc.test3;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="源端推送进程"><a href="#源端推送进程" class="headerlink" title="源端推送进程"></a>源端推送进程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 90&gt; view params DP_TS</span><br><span class="line"></span><br><span class="line">EXTRACT dp_ts</span><br><span class="line">useridalias ggs</span><br><span class="line">DISCARDFILE ./dirrpt/dpet3.dsc, APPEND, MEGABYTES 1024</span><br><span class="line">RMTHOST 192.168.192.202, MGRPORT 7809</span><br><span class="line">RMTTRAIL ./dirdat/ts</span><br><span class="line">--PASSTHRU</span><br><span class="line">sequence hc.*;</span><br><span class="line">table hc.test3;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="生成defgen文件"><a href="#生成defgen文件" class="headerlink" title="生成defgen文件"></a>生成defgen文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 源端生成defgen.prm</span><br><span class="line">GGSCI（oracle，作为 oggadmin@orcl） 91&gt; view params defgen</span><br><span class="line"></span><br><span class="line">defsfile ./dirdef/oracletomysql.def, purge</span><br><span class="line">useridalias ggs</span><br><span class="line">TABLE hc.test3;</span><br><span class="line"></span><br><span class="line"># 生成 </span><br><span class="line">su - oracle</span><br><span class="line">cd ogg</span><br><span class="line">./ggsci</span><br><span class="line">./defgen paramfile dirprm/defgen.prm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 将文件oracletomysql.def复制到目标端</span><br><span class="line">[root@mysql dirdef]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 1286 5月  23 01:03 oracletomysql.def</span><br><span class="line">[root@mysql dirdef]# pwd</span><br><span class="line">/root/ogg/dirdef</span><br><span class="line">[root@mysql dirdef]#</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="目标端抽取进程配置"><a href="#目标端抽取进程配置" class="headerlink" title="目标端抽取进程配置"></a>目标端抽取进程配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GGSCI (mysql) 2&gt; view params REP_TS</span><br><span class="line"></span><br><span class="line">REPLICAT rep_ts</span><br><span class="line">sourcecharset ZHS16GBK</span><br><span class="line">targetdb test useridalias ggm  #需要加add credentialstore</span><br><span class="line">sourcedefs ./dirdef/oracletomysql.def</span><br><span class="line">discardfile ./dirdat/repts.dsc,append</span><br><span class="line">MAP hc.test3, TARGET test.test3;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注：异构配置省略些许操作演示，其基本流程和表异构相差无几。</p><h4 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 源端 闲杂数据是测试生成</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> hc.test3 (</span><br><span class="line">id number(<span class="number">20</span>),</span><br><span class="line">name varchar2(<span class="number">20</span>),</span><br><span class="line">age number(<span class="number">10</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> hc.test3 (id,name,age) <span class="keyword">values</span> (<span class="number">11</span>,<span class="string">&#x27;ff&#x27;</span>,<span class="number">12</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">select</span><span class="operator">*</span> <span class="keyword">from</span> hc.test3</span><br></pre></td></tr></table></figure><p><img src="image-20240523100958345.png" alt="image-20240523100958345"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#目标端查看</span><br><span class="line">select * from test.test3;</span><br></pre></td></tr></table></figure><p><img src="image-20240523101202681.png" alt="image-20240523101202681"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Installing-Oracle-GoldenGate-21&quot;&gt;&lt;a href=&quot;#Installing-Oracle-GoldenGate-21&quot; class=&quot;headerlink&quot; title=&quot;Installing  Oracle GoldenGate </summary>
      
    
    
    
    
    <category term="Oracle" scheme="https://stealhd.github.io/tags/Oracle/"/>
    
    <category term="Ogg" scheme="https://stealhd.github.io/tags/Ogg/"/>
    
  </entry>
  
  <entry>
    <title>centos 7 oracle11g install</title>
    <link href="https://stealhd.github.io/2024/05/14/Oracle11g_install/"/>
    <id>https://stealhd.github.io/2024/05/14/Oracle11g_install/</id>
    <published>2024-05-14T03:30:01.002Z</published>
    <updated>2024-05-20T03:16:43.523Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Centos-7-Oracle-11g-install"><a href="#Centos-7-Oracle-11g-install" class="headerlink" title="Centos 7 Oracle 11g install"></a>Centos 7 Oracle 11g install</h2><h3 id="准备所需文件"><a href="#准备所需文件" class="headerlink" title="准备所需文件"></a>准备所需文件</h3><ol><li>oracle 11g  文件</li><li>centos 7 iso （离线安装用）</li><li>补丁（可用可不用）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭 selinux</span></span><br><span class="line">sudo sed -i <span class="string">&#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27;</span> /etc/selinux/config</span><br><span class="line">setenforce 0</span><br><span class="line"><span class="comment"># 配置hosts </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;192.168.192.119 Oracle&#x27;</span> &gt;&gt; /etc/hosts</span><br><span class="line"><span class="comment">#离线安装 挂在iso 用于安装依赖 联网不用这步骤</span></span><br><span class="line">mount -o loop CentOS-7-x86_64-DVD-2009.iso /mnt/</span><br><span class="line"><span class="built_in">mv</span> /etc/yum.repos.d/ /etc/yum.repos.d.bak/</span><br><span class="line"><span class="built_in">mkdir</span> /etc/yum.repos.d</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;[iso]\nname=iso\nbaseurl=file:///mnt/\ngpgcheck=0\nenabled=1&quot;</span> | sudo <span class="built_in">tee</span> /etc/yum.repos.d/iso.repo</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># linux 7</span></span><br><span class="line">yum install -y binutils-*.x86_64 \</span><br><span class="line">compat-libcap1-*.x86_64 \</span><br><span class="line">compat-libstdc++-33-*.i686 \</span><br><span class="line">compat-libstdc++-33-*.x86_64 \</span><br><span class="line">gcc-*.x86_64 \</span><br><span class="line">gcc-c++-*.x86_64 \</span><br><span class="line">glibc-*.i686 \</span><br><span class="line">glibc-*.x86_64 \</span><br><span class="line">glibc-devel-*.i686 \</span><br><span class="line">glibc-devel-*.x86_64 \</span><br><span class="line">ksh \</span><br><span class="line">libaio-*.i686 \</span><br><span class="line">libaio-*.x86_64 \</span><br><span class="line">libaio-devel-*.i686 \</span><br><span class="line">libaio-devel-*.x86_64 \</span><br><span class="line">libgcc-*.i686 \</span><br><span class="line">libgcc-*.x86_64 \</span><br><span class="line">libstdc++-*.i686 \</span><br><span class="line">libstdc++-*.x86_64 \</span><br><span class="line">libstdc++-devel-*.i686 \</span><br><span class="line">libstdc++-devel-*.x86_64 \</span><br><span class="line">libXi-*.i686 \</span><br><span class="line">libXi-*.x86_64 \</span><br><span class="line">libXtst-*.i686 \</span><br><span class="line">libXtst-*.x86_64 \</span><br><span class="line">make-*.x86_64 \</span><br><span class="line">sysstat-*.x86_64 \</span><br><span class="line">unixODBC-*.x86_64 \</span><br><span class="line">unixODBC-*.i686 \</span><br><span class="line">unixODBC-devel-*.x86_64 \</span><br><span class="line">unixODBC-devel-*.i686 \</span><br><span class="line">unzip</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># linux 6</span></span><br><span class="line"><span class="comment"># yum install -y binutils compat-libcap1 compat-libstdc++-33 gcc gcc-c++ glibc glibc-devel ksh libgcc libstdc++ libstdc++-devel libaio libaio-devel make sysstat unixODBC-devel pdksh unzip</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">rm</span> -rf /etc/yum.repo.d/</span><br><span class="line"><span class="built_in">mv</span> /etc/yum.repos.d.bak/ /etc/yum.repos.d/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置oracle 用户 组</span></span><br><span class="line">groupadd oinstall</span><br><span class="line">groupadd dba</span><br><span class="line">useradd -g oinstall -G dba oracle</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置资源 /etc/security/limits.conf</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;oracle soft nofile 1024</span></span><br><span class="line"><span class="string">oracle hard nofile 65536</span></span><br><span class="line"><span class="string">oracle soft nproc 2047</span></span><br><span class="line"><span class="string">oracle hard nproc 16384</span></span><br><span class="line"><span class="string">oracle soft stack 10240</span></span><br><span class="line"><span class="string">oracle hard stack 32768&#x27;</span> &gt;&gt; /etc/security/limits.conf</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;kernel.sem = 250 32000 100 128</span></span><br><span class="line"><span class="string">kernel.shmall = 2097152</span></span><br><span class="line"><span class="string">kernel.shmmax = 536870912 # 单位B ,512M 根据自生内存修改 通常建议将其设置为系统内存的一半</span></span><br><span class="line"><span class="string">kernel.shmmni = 4096</span></span><br><span class="line"><span class="string">fs.file-max = 6815744</span></span><br><span class="line"><span class="string">fs.aio-max-nr = 1048576</span></span><br><span class="line"><span class="string">net.ipv4.ip_local_port_range = 9000 65500</span></span><br><span class="line"><span class="string">net.core.rmem_default = 262144</span></span><br><span class="line"><span class="string">net.core.rmem_max = 4194304</span></span><br><span class="line"><span class="string">net.core.wmem_default = 262144</span></span><br><span class="line"><span class="string">net.core.wmem_max = 1048576&#x27;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置生效</span></span><br><span class="line">sysctl -p</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p /u01/app/</span><br><span class="line"><span class="built_in">chown</span> -R oracle:oinstall /u01/app/</span><br><span class="line"><span class="built_in">chmod</span> -R 775 /u01/app/</span><br><span class="line">unzip p13390677_112040_Linux-x86-64_1of7.zip -d /u01/</span><br><span class="line">unzip p13390677_112040_Linux-x86-64_2of7.zip -d /u01/</span><br><span class="line"><span class="built_in">chown</span> -R oracle:oinstall /u01/database</span><br><span class="line"><span class="built_in">chmod</span> -R 775 /u01/database</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export ORACLE_SID=orcl</span></span><br><span class="line"><span class="string">export ORACLE_BASE=/u01/app/oracle</span></span><br><span class="line"><span class="string">export ORACLE_HOME=$ORACLE_BASE/product/11.2.0/dbhome_1</span></span><br><span class="line"><span class="string">export LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/lib</span></span><br><span class="line"><span class="string">export PATH=$ORACLE_HOME/bin:$ORACLE_HOME/OPatch:$PATH&#x27;</span> &gt;&gt; /home/oracle/.bash_profile</span><br></pre></td></tr></table></figure><h3 id="图形化安装"><a href="#图形化安装" class="headerlink" title="图形化安装"></a>图形化安装</h3><h4 id="oracle-runInstaller"><a href="#oracle-runInstaller" class="headerlink" title="oracle runInstaller"></a>oracle runInstaller</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">su - oracle</span><br><span class="line"><span class="comment"># 192.168.192.1 是填写本机同网段ip</span></span><br><span class="line">DISPLAY=192.168.192.1:0.0; <span class="built_in">export</span> DISPLAY</span><br><span class="line"><span class="comment"># 处理中文乱码</span></span><br><span class="line"><span class="built_in">export</span> LC_ALL=en_US</span><br><span class="line">/u01/database/runInstaller</span><br></pre></td></tr></table></figure><p><img src="image-20240515014318333.png" alt="image-20240515014318333"></p><p><img src="image-20240515025307176.png" alt="image-20240515025307176"></p><p><img src="image-20240515025324708.png" alt="image-20240515025324708"></p><p><img src="image-20240515025337638.png" alt="image-20240515025337638"></p><p><img src="image-20240515025436811.png" alt="image-20240515025436811"></p><p><img src="image-20240515025445419.png" alt="image-20240515025445419"></p><p><img src="image-20240515025500908.png" alt="image-20240515025500908"></p><p><img src="image-20240515025556395.png" alt="image-20240515025556395"></p><p><img src="image-20240515025605302.png" alt="image-20240515025605302"></p><p><img src="image-20240515025614245.png" alt="image-20240515025614245"></p><p><img src="image-20240515025630171.png" alt="image-20240515025630171"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/^kernel.shmmax.*/kernel.shmmax = 1549053952/&#x27;</span> /etc/sysctl.conf</span><br><span class="line"><span class="comment"># test.conf</span></span><br><span class="line"><span class="comment"># vim /etc/sysctl.conf</span></span><br><span class="line"><span class="comment"># 修改完之后</span></span><br><span class="line">sysctl -p</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="image-20240515025748872.png" alt="image-20240515025748872"></p><p><img src="image-20240515025803787.png" alt="image-20240515025803787"></p><p><img src="image-20240515025811330.png" alt="image-20240515025811330"></p><p><img src="image-20240515025926921.png" alt="image-20240515025926921"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># oracle用户下</span><br><span class="line">sed -i &#x27;s/\$(MK_EMAGENT_NMECTL)/\$(MK_EMAGENT_NMECTL) -lnnz11/&#x27; /$ORACLE_HOME/sysman/lib/ins_emagent.mk</span><br><span class="line">#Exception String: Error in invoking target &#x27;agent nmhs&#x27; of makefile #&#x27;/u01/app/oracle/product/11.2.0/dbhome_1/sysman/lib/ins_emagent.mk&#x27;.</span><br><span class="line">#vi $ORACLE_HOME/sysman/lib/ins_emagent.mk |grep $(MK_EMAGENT_NMECTL)</span><br><span class="line">#$(MK_EMAGENT_NMECTL)</span><br><span class="line">#$(MK_EMAGENT_NMECTL) -lnnz11</span><br><span class="line">#Retry</span><br></pre></td></tr></table></figure><p><img src="image-20240515030017511.png" alt="image-20240515030017511"></p><p><img src="image-20240515030105626.png" alt="image-20240515030105626"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># root用户</span></span><br><span class="line">/u01/app/oraInventory/orainstRoot.sh</span><br><span class="line">/u01/app/oracle/product/11.2.0/dbhome_1/root.sh <span class="comment">#敲个回车</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 输出 </span><br><span class="line">[root@oracle ~]# /u01/app/oraInventory/orainstRoot.sh</span><br><span class="line">Changing permissions of /u01/app/oraInventory.</span><br><span class="line">Adding read,write permissions for group.</span><br><span class="line">Removing read,write,execute permissions for world.</span><br><span class="line"></span><br><span class="line">Changing groupname of /u01/app/oraInventory to oinstall.</span><br><span class="line">The execution of the script is complete.</span><br><span class="line">[root@oracle ~]# /u01/app/oracle/product/11.2.0/dbhome_1/root.sh</span><br><span class="line">Performing root user operation for Oracle 11g</span><br><span class="line"></span><br><span class="line">The following environment variables are set as:</span><br><span class="line">    ORACLE_OWNER= oracle</span><br><span class="line">    ORACLE_HOME=  /u01/app/oracle/product/11.2.0/dbhome_1</span><br><span class="line"></span><br><span class="line">Enter the full pathname of the local bin directory: [/usr/local/bin]:</span><br><span class="line">   Copying dbhome to /usr/local/bin ...</span><br><span class="line">   Copying oraenv to /usr/local/bin ...</span><br><span class="line">   Copying coraenv to /usr/local/bin ...</span><br><span class="line"></span><br><span class="line">Creating /etc/oratab file...</span><br><span class="line">Entries will be added to the /etc/oratab file as needed by</span><br><span class="line">Database Configuration Assistant when a database is created</span><br><span class="line">Finished running generic part of root script.</span><br><span class="line">Now product-specific root actions will be performed.</span><br><span class="line">Finished product-specific root actions.</span><br></pre></td></tr></table></figure><p><img src="image-20240515030157137.png" alt="image-20240514015659154"></p><h4 id="netca"><a href="#netca" class="headerlink" title="netca"></a>netca</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 监听安装</span></span><br><span class="line">netca</span><br><span class="line"><span class="comment">#DISPLAY=192.168.192.1:0.0; export DISPLAY</span></span><br><span class="line"><span class="comment"># 处理中文乱码</span></span><br><span class="line"><span class="comment">#export LC_ALL=en_US</span></span><br></pre></td></tr></table></figure><p><img src="image-20240515030242086.png" alt="image-20240515030242086"></p><p><img src="image-20240515030249842.png" alt="image-20240515030249842"></p><p><img src="image-20240515030257815.png" alt="image-20240515030257815"></p><p><img src="image-20240515030327270.png" alt="image-20240515030327270"></p><p><img src="image-20240515030318912.png" alt="image-20240515030318912"></p><p><img src="image-20240515030336847.png" alt="image-20240515030336847"></p><p><img src="image-20240515030344853.png" alt="image-20240515030344853"></p><p>一路next，最后finish，可以根据需求修改监听。</p><p><img src="image-20240515030355029.png" alt="image-20240515030355029"></p><h4 id="dbca"><a href="#dbca" class="headerlink" title="dbca"></a>dbca</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实例安装</span></span><br><span class="line">dbca</span><br><span class="line"><span class="comment">#DISPLAY=192.168.192.1:0.0; export DISPLAY</span></span><br><span class="line"><span class="comment"># 处理中文乱码</span></span><br><span class="line"><span class="comment">#export LC_ALL=en_US</span></span><br></pre></td></tr></table></figure><p><img src="image-20240515030421317.png" alt="image-20240515030421317"></p><p><img src="image-20240515030429686.png" alt="image-20240515030429686"></p><p><img src="image-20240515030438642.png" alt="image-20240515030438642"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 实例id 看自己的bash_profile $ORACLE_SID</span><br></pre></td></tr></table></figure><p><img src="image-20240515030450742.png" alt="image-20240515030450742"></p><p><img src="image-20240515030517483.png" alt="image-20240515030517483"></p><p><img src="image-20240515030559454.png" alt="image-20240515030559454"></p><p><img src="image-20240515030610422.png" alt="image-20240515030610422"></p><p><img src="image-20240515030618940.png" alt="image-20240515030618940"></p><p><img src="image-20240515030625789.png" alt="image-20240515030625789"></p><p><img src="image-20240515030701283.png" alt="image-20240515030701283"></p><p><img src="image-20240515030741965.png" alt="image-20240515030741965"></p><p><img src="image-20240515030749144.png" alt="image-20240515030749144"></p><p><img src="image-20240515030755313.png" alt="image-20240515030755313"></p><p><img src="image-20240515030810092.png" alt="image-20240515030810092"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示不出 放大一下窗口</span></span><br></pre></td></tr></table></figure><p><img src="image-20240515030820319.png" alt="image-20240515030820319"></p><p><img src="image-20240515031104473.png" alt="image-20240515031104473"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 测试实例</span><br><span class="line">sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba</span><br><span class="line"><span class="keyword">select</span> open_mode <span class="keyword">from</span> v$database;</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">[oracle<span class="variable">@oracle</span> <span class="operator">~</span>]$ sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">*</span>Plus: <span class="keyword">Release</span> <span class="number">11.2</span><span class="number">.0</span><span class="number">.4</span><span class="number">.0</span> Production <span class="keyword">on</span> Tue May <span class="number">14</span> <span class="number">02</span>:<span class="number">10</span>:<span class="number">52</span> <span class="number">2024</span></span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">1982</span>, <span class="number">2013</span>, Oracle.  <span class="keyword">All</span> rights reserved.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Connected <span class="keyword">to</span>:</span><br><span class="line">Oracle Database <span class="number">11</span>g Enterprise Edition <span class="keyword">Release</span> <span class="number">11.2</span><span class="number">.0</span><span class="number">.4</span><span class="number">.0</span> <span class="operator">-</span> <span class="number">64</span>bit Production</span><br><span class="line"><span class="keyword">With</span> the Partitioning, OLAP, Data Mining <span class="keyword">and</span> <span class="type">Real</span> Application Testing options</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span><span class="keyword">select</span> open_mode <span class="keyword">from</span> v$database;</span><br><span class="line"></span><br><span class="line">OPEN_MODE</span><br><span class="line"><span class="comment">--------------------</span></span><br><span class="line">READ WRITE</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Centos-7-Oracle-11g-install&quot;&gt;&lt;a href=&quot;#Centos-7-Oracle-11g-install&quot; class=&quot;headerlink&quot; title=&quot;Centos 7 Oracle 11g install&quot;&gt;&lt;/a&gt;Cento</summary>
      
    
    
    
    
    <category term="Oracle" scheme="https://stealhd.github.io/tags/Oracle/"/>
    
  </entry>
  
  <entry>
    <title>hexo搭建部署</title>
    <link href="https://stealhd.github.io/2024/05/08/hexo%E6%90%AD%E5%BB%BA/"/>
    <id>https://stealhd.github.io/2024/05/08/hexo%E6%90%AD%E5%BB%BA/</id>
    <published>2024-05-07T17:47:16.062Z</published>
    <updated>2024-05-10T15:44:10.776Z</updated>
    
    <content type="html"><![CDATA[<h2 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h2><h3 id="安装前所需环境介绍"><a href="#安装前所需环境介绍" class="headerlink" title="安装前所需环境介绍"></a>安装前所需环境介绍</h3><p>安装 Hexo 之前，需要确保您的 PC 中已经安装以下工具:</p><ul><li>Node.js [地址: <a href="https://nodejs.org/en/">Node.js — Run JavaScript Everywhere (nodejs.org)</a>]</li><li>Git [地址: <a href="https://git-scm.com/">Git (git-scm.com)</a>]</li></ul><h3 id="安装hexo相关组件"><a href="#安装hexo相关组件" class="headerlink" title="安装hexo相关组件"></a>安装hexo相关组件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装完成后cnpm -v检查输出</span></span><br><span class="line">npm install -g cnpm --registry==https://registry.npm.taobao.org</span><br><span class="line"><span class="comment">#安装完成后hexo -v检查输出</span></span><br><span class="line">cnpm install -g hexo-cli</span><br><span class="line"><span class="comment">#之后更换主题有用</span></span><br><span class="line">npm install --save hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive</span><br></pre></td></tr></table></figure><p>建议永远安装最新版本的 Hexo。</p><table><thead><tr><th align="center">Hexo 版本</th><th align="center">最低兼容 Node.js 版本</th></tr></thead><tbody><tr><td align="center">6.0+</td><td align="center">12.13.0</td></tr><tr><td align="center">5.0+</td><td align="center">10.13.0</td></tr><tr><td align="center">4.1 - 4.2</td><td align="center">8.10</td></tr><tr><td align="center">4.0</td><td align="center">8.6</td></tr><tr><td align="center">3.3 - 3.9</td><td align="center">6.9</td></tr><tr><td align="center">3.2 - 3.3</td><td align="center">0.12</td></tr><tr><td align="center">3.0 - 3.1</td><td align="center">0.10 or iojs</td></tr><tr><td align="center">0.0.1 - 2.8</td><td align="center">0.10</td></tr></tbody></table><h3 id="选择合适文件夹下一键部署"><a href="#选择合适文件夹下一键部署" class="headerlink" title="选择合适文件夹下一键部署"></a>选择合适文件夹下一键部署</h3><p>官方参考文档</p><p><a href="https://hexo.io/zh-cn/docs/">文档 | Hexo</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#初始化</span></span><br><span class="line">hexo init </span><br><span class="line">npm install</span><br><span class="line"><span class="comment">#启动服务 http://localhost:4000/</span></span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><h2 id="后记："><a href="#后记：" class="headerlink" title="后记："></a>后记：</h2><p>​        这个只是简单的部署，还要考虑网站部署，参数修改，文章维护，主题优化等各个方面来健全自己的blog。</p><p>之后陆续跟新一下内容。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;快速上手&quot;&gt;&lt;a href=&quot;#快速上手&quot; class=&quot;headerlink&quot; title=&quot;快速上手&quot;&gt;&lt;/a&gt;快速上手&lt;/h2&gt;&lt;h3 id=&quot;安装前所需环境介绍&quot;&gt;&lt;a href=&quot;#安装前所需环境介绍&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    
    <category term="Hexo" scheme="https://stealhd.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://stealhd.github.io/2024/05/07/hello-world/"/>
    <id>https://stealhd.github.io/2024/05/07/hello-world/</id>
    <published>2024-05-07T15:32:35.082Z</published>
    <updated>2024-08-13T01:57:01.205Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><h3 id="blockquote"><a href="#blockquote" class="headerlink" title="blockquote"></a>blockquote</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote [author[, source]] [link] [source_link_title] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这是代码内容</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><div class="tag-plugin tabs" align="center" id="tab_1"><div class="nav-tabs"><div class="tab"><a href="#tab_1-1">图片</a></div><div class="tab active"><a href="#tab_1-2">代码块</a></div><div class="tab"><a href="#tab_1-3">表格</a></div></div><div class="tab-content"><div class="tab-pane" id="tab_1-1"><div class="tag-plugin image"><div class="image-bg"><img src="wiki/stellar/photos/hello@1x.png" style="width:300px;"></div></div></div><div class="tab-pane active" id="tab_1-2"><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x <span class="operator">=</span> <span class="number">123</span> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello world&quot;</span>) </span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="tab_1-3"><table><thead><tr><th>a</th><th>b</th><th>c</th></tr></thead><tbody><tr><td>a1</td><td>b1</td><td>c1</td></tr><tr><td>a2</td><td>b2</td><td>c2</td></tr></tbody></table></div></div></div> <hr><div class="tag-plugin tabs" align="center" id="tab_2"><div class="nav-tabs"><div class="tab"><a href="#tab_2-1">推荐的写法</a></div><div class="tab active"><a href="#tab_2-2">不推荐的写法</a></div></div><div class="tab-content"><div class="tab-pane" id="tab_2-1"><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">test</span>() &#123; </span><br><span class="line"><span class="comment">// ... </span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></div><div class="tab-pane active" id="tab_2-2"><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">test</span>() -&gt; () &#123; </span><br><span class="line"><span class="comment">// ... </span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></div></div></div><div class="tag-plugin gallery grid-box" size="mix" ratio="square"><div class="grid-cell"><img data-fancybox="gallery-1" src="https://images.unsplash.com/photo-1688142202243-e218ad203952?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDYzfEZ6bzN6dU9ITjZ3fHxlbnwwfHx8fHw%3D" alt="@tianhao_wang"><div class="image-meta"><span class="image-caption">@tianhao_wang</span></div></div><div class="grid-cell"><img data-fancybox="gallery-1" src="https://images.unsplash.com/photo-1700994630045-f7a20df6d92e?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwcm9maWxlLXBhZ2V8MjN8fHxlbnwwfHx8fHw%3D" alt="@eberhard"><div class="image-meta"><span class="image-caption">@eberhard</span></div></div><div class="grid-cell"><img data-fancybox="gallery-1" src="https://images.unsplash.com/photo-1533274221104-015a584a1005?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDE4fGJvOGpRS1RhRTBZfHxlbnwwfHx8fHw%3D" alt="@eberhard"><div class="image-meta"><span class="image-caption">@eberhard</span></div></div><div class="grid-cell"><img data-fancybox="gallery-1" src="https://images.unsplash.com/photo-1539604214100-ab860d9082e0?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDIxfGJvOGpRS1RhRTBZfHxlbnwwfHx8fHw%3D" alt="@eberhard"><div class="image-meta"><span class="image-caption">@eberhard</span></div></div><div class="grid-cell"><img data-fancybox="gallery-1" src="https://images.unsplash.com/photo-1698843848092-588f9c1bb0bd?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwcm9maWxlLXBhZ2V8Mzh8fHxlbnwwfHx8fHw%3D" alt="@eberhard"><div class="image-meta"><span class="image-caption">@eberhard</span></div></div><div class="grid-cell"><img data-fancybox="gallery-1" src="https://images.unsplash.com/photo-1516571748831-5d81767b788d?q=80&w=2574&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="@vklemen"><div class="image-meta"><span class="image-caption">@vklemen</span></div></div></div><div class="tag-plugin banner"><img class="bg" src="banner/notes.jpg"><div class="content"><div class="top">    <button class="back cap" onclick="window.history.back()">      <svg aria-hidden="true" viewbox="0 0 16 16" fill="currentColor"><path fill-rule="evenodd" d="M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"/></svg>    </button>    <div class="tag-plugin navbar"><nav><a class="link active" href="/notes/">随记</a><a class="link" href="/bookmark/">收藏</a></nav></div></div><div class="bottom"><div class="text-area"><div class="text title">随记</div></div></div></div></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><div class="tag-plugin banner"><img class="bg" src="xaoxuu/blog/2022-1126a@2x.jpg"><div class="content"><div class="top"><div></div></div><div class="bottom"><div class="text-area"><div class="text title">博客进阶：自动化部署</div><div class="text subtitle">本文讲了如何利用脚本和 GitHub Actions 简化博客搭建和部署流程，提高效率。</div></div></div></div><a class="banner-link" href="/blog/20221126/"></a></div><div class="tag-plugin swiper fancybox" id="swiper-api" effect="cards"><div class="swiper-wrapper"><div class="swiper-slide"><img no-lazy src="https://images.unsplash.com/photo-1625171515821-1870deb2743b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80"></div><div class="swiper-slide"><img no-lazy src="https://images.unsplash.com/photo-1528283648649-33347faa5d9e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80"></div><div class="swiper-slide"><img no-lazy src="https://images.unsplash.com/photo-1542272201-b1ca555f8505?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80"></div><div class="swiper-slide"><img no-lazy src="https://images.unsplash.com/photo-1524797905120-92940d3a18d6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80"></div></div><div class="swiper-pagination"></div><div class="swiper-button-prev blur"></div><div class="swiper-button-next blur"></div></div><div class="tag-plugin timeline"><div class="timenode" index="0"><div class="header">第一步：打开 GitHub</div><div class="body fs14"><p>打开 <a href="https://github.com/xaoxuu/hexo-theme-stellar/">Stellar</a> 的 GitHub 页面。</p></div></div><div class="timenode" index="1"><div class="header">第二步：点击 Star</div><div class="body fs14"><p>如果发现右上角的 Star 还没点亮，就点亮它！</p></div></div></div><a class="tag-plugin colorful hashtag" color="red" href="https://xaoxuu.com/wiki/stellar/"><svg t="1701408144765" class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4228" width="200" height="200"><path d="M426.6 64.8c34.8 5.8 58.4 38.8 52.6 73.6l-19.6 117.6h190.2l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6s58.4 38.8 52.6 73.6l-19.4 117.6H896c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-42.6 256H832c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.6-117.4h-190.4l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.4-117.8H128c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l42.6-256H192c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6z m11.6 319.2l-42.6 256h190.2l42.6-256h-190.2z" p-id="4229"/></svg><span>Stellar</span></a><a class="tag-plugin colorful hashtag" color="orange" href="https://hexo.io/"><svg t="1701408144765" class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4228" width="200" height="200"><path d="M426.6 64.8c34.8 5.8 58.4 38.8 52.6 73.6l-19.6 117.6h190.2l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6s58.4 38.8 52.6 73.6l-19.4 117.6H896c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-42.6 256H832c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.6-117.4h-190.4l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.4-117.8H128c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l42.6-256H192c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6z m11.6 319.2l-42.6 256h190.2l42.6-256h-190.2z" p-id="4229"/></svg><span>Hexo</span></a><a class="tag-plugin colorful hashtag" color="yellow" href="https://github.com/xaoxuu/"><svg t="1701408144765" class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4228" width="200" height="200"><path d="M426.6 64.8c34.8 5.8 58.4 38.8 52.6 73.6l-19.6 117.6h190.2l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6s58.4 38.8 52.6 73.6l-19.4 117.6H896c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-42.6 256H832c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.6-117.4h-190.4l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.4-117.8H128c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l42.6-256H192c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6z m11.6 319.2l-42.6 256h190.2l42.6-256h-190.2z" p-id="4229"/></svg><span>GitHub</span></a><a class="tag-plugin colorful hashtag" color="green" href="https://git.xaox.cc/"><svg t="1701408144765" class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4228" width="200" height="200"><path d="M426.6 64.8c34.8 5.8 58.4 38.8 52.6 73.6l-19.6 117.6h190.2l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6s58.4 38.8 52.6 73.6l-19.4 117.6H896c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-42.6 256H832c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.6-117.4h-190.4l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.4-117.8H128c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l42.6-256H192c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6z m11.6 319.2l-42.6 256h190.2l42.6-256h-190.2z" p-id="4229"/></svg><span>Gitea</span></a><p>项目地址：<a href="https://gitee.com/link?target=https://github.com/Jonnyan404/zerotier-planet">https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FJonnyan404%2Fzerotier-planet</a></p>]]></content>
    
    
    <summary type="html">测试</summary>
    
    
    
    
  </entry>
  
</feed>
